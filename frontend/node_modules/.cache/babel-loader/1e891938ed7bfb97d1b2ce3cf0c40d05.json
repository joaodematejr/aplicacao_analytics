{"ast":null,"code":"import _toConsumableArray from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport mock from './../mock';\nimport { FuseUtils } from '@fuse';\nimport _ from '@lodash';\nvar chatDb = {\n  contacts: [{\n    'id': '5725a680b3249760ea21de52',\n    'name': 'Alice Freeman',\n    'avatar': 'assets/images/avatars/alice.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n    'unread': '2'\n  }, {\n    'id': '5725a680606588342058356d',\n    'name': 'Arnold',\n    'avatar': 'assets/images/avatars/Arnold.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n    'unread': '3'\n  }, {\n    'id': '5725a68009e20d0a9e9acf2a',\n    'name': 'Barrera',\n    'avatar': 'assets/images/avatars/Barrera.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n    'unread': '1'\n  }, {\n    'id': '5725a6809fdd915739187ed5',\n    'name': 'Blair',\n    'avatar': 'assets/images/avatars/Blair.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a68007920cf75051da64',\n    'name': 'Boyle',\n    'avatar': 'assets/images/avatars/Boyle.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a68031fdbb1db2c1af47',\n    'name': 'Christy',\n    'avatar': 'assets/images/avatars/Christy.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680bc670af746c435e2',\n    'name': 'Copeland',\n    'avatar': 'assets/images/avatars/Copeland.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680e7eb988a58ddf303',\n    'name': 'Estes',\n    'avatar': 'assets/images/avatars/Estes.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680dcb077889f758961',\n    'name': 'Harper',\n    'avatar': 'assets/images/avatars/Harper.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6806acf030f9341e925',\n    'name': 'Helen',\n    'avatar': 'assets/images/avatars/Helen.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680ae1ae9a3c960d487',\n    'name': 'Henderson',\n    'avatar': 'assets/images/avatars/Henderson.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680b8d240c011dd224b',\n    'name': 'Josefina',\n    'avatar': 'assets/images/avatars/Josefina.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a68034cb3968e1f79eac',\n    'name': 'Katina',\n    'avatar': 'assets/images/avatars/Katina.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6801146cce777df2a08',\n    'name': 'Lily',\n    'avatar': 'assets/images/avatars/Lily.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6808a178bfd034d6ecf',\n    'name': 'Mai',\n    'avatar': 'assets/images/avatars/Mai.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680653c265f5c79b5a9',\n    'name': 'Nancy',\n    'avatar': 'assets/images/avatars/Nancy.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680bbcec3cc32a8488a',\n    'name': 'Nora',\n    'avatar': 'assets/images/avatars/Nora.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6803d87f1b77e17b62b',\n    'name': 'Odessa',\n    'avatar': 'assets/images/avatars/Odessa.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680e87cb319bd9bd673',\n    'name': 'Reyna',\n    'avatar': 'assets/images/avatars/Reyna.jpg',\n    'status': 'offline',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6802d10e277a0f35775',\n    'name': 'Shauna',\n    'avatar': 'assets/images/avatars/Shauna.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680aef1e5cf26dd3d1f',\n    'name': 'Shepard',\n    'avatar': 'assets/images/avatars/Shepard.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a680cd7efa56a45aea5d',\n    'name': 'Tillman',\n    'avatar': 'assets/images/avatars/Tillman.jpg',\n    'status': 'do-not-disturb',\n    'mood': ''\n  }, {\n    'id': '5725a680fb65c91a82cb35e2',\n    'name': 'Trevino',\n    'avatar': 'assets/images/avatars/Trevino.jpg',\n    'status': 'away',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a68018c663044be49cbf',\n    'name': 'Tyson',\n    'avatar': 'assets/images/avatars/Tyson.jpg',\n    'status': 'do-not-disturb',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }, {\n    'id': '5725a6809413bf8a0a5272b1',\n    'name': 'Velazquez',\n    'avatar': 'assets/images/avatars/Velazquez.jpg',\n    'status': 'online',\n    'mood': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n  }],\n  chats: [{\n    'id': '1725a680b3249760ea21de52',\n    'dialog': [{\n      'who': '5725a680b3249760ea21de52',\n      'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n      'time': '2017-03-22T08:54:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n      'time': '2017-03-22T08:55:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n      'time': '2017-03-22T08:56:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-03-22T09:00:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n      'time': '2017-03-22T09:02:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T09:05:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-03-22T09:14:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T09:16:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-03-22T09:17:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n      'time': '2017-03-22T09:20:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T09:22:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-03-22T09:25:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n      'time': '2017-03-22T09:27:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T09:33:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T09:34:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-03-22T09:35:28.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n      'time': '2017-03-22T09:45:28.299Z'\n    }, {\n      'who': '5725a680b3249760ea21de52',\n      'message': 'You are the worst!',\n      'time': '2017-03-22T10:00:28.299Z'\n    }]\n  }, {\n    'id': '2725a680b8d240c011dd2243',\n    'dialog': [{\n      'who': '5725a680606588342058356d',\n      'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n      'time': '2017-04-22T01:00:00.299Z'\n    }, {\n      'who': '5725a6802d10e277a0f35724',\n      'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n      'time': '2017-04-22T01:05:00.299Z'\n    }, {\n      'who': '5725a680606588342058356d',\n      'message': 'We are losing money! Quick!',\n      'time': '2017-04-22T01:10:00.299Z'\n    }]\n  }, {\n    'id': '3725a6809413bf8a0a5272b4',\n    'dialog': [{\n      'who': '5725a68009e20d0a9e9acf2a',\n      'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n      'time': '2017-04-22T02:10:00.299Z'\n    }]\n  }],\n  user: [{\n    'id': '5725a6802d10e277a0f35724',\n    'name': 'John Doe',\n    'avatar': 'assets/images/avatars/profile.jpg',\n    'status': 'online',\n    'mood': 'it\\'s a status....not your diary...',\n    'chatList': [{\n      'chatId': '1725a680b3249760ea21de52',\n      'contactId': '5725a680b3249760ea21de52',\n      'lastMessageTime': '2017-06-12T02:10:18.931Z'\n    }, {\n      'chatId': '2725a680b8d240c011dd2243',\n      'contactId': '5725a680606588342058356d',\n      'lastMessageTime': '2017-02-18T10:30:18.931Z'\n    }, {\n      'chatId': '3725a6809413bf8a0a5272b4',\n      'contactId': '5725a68009e20d0a9e9acf2a',\n      'lastMessageTime': '2017-03-18T12:30:18.931Z'\n    }]\n  }]\n};\nmock.onGet('/api/chat/contacts').reply(function (config) {\n  return [200, chatDb.contacts];\n});\nmock.onGet('/api/chat/get-chat').reply(function (request) {\n  var contactId = request.contactId,\n      userId = request.userId;\n  var response;\n  var user = chatDb.user.find(function (_user) {\n    return _user.id === userId;\n  });\n  var chat = user.chatList.find(function (_chat) {\n    return _chat.contactId === contactId;\n  });\n  var chatId = chat ? chat.chatId : createNewChat(contactId, userId);\n  response = chatDb.chats.find(function (_chat) {\n    return _chat.id === chatId;\n  });\n  return [200, {\n    chat: response,\n    userChatData: user.chatList.find(function (_chat) {\n      return _chat.contactId === contactId;\n    })\n  }];\n});\nmock.onGet('/api/chat/user').reply(function (config) {\n  return [200, chatDb.user[0]];\n});\nmock.onPost('/api/chat/user/data').reply(function (request) {\n  var data = JSON.parse(request.data);\n  chatDb.user[0] = _.merge({}, chatDb.user[0], data);\n  return [200, chatDb.user[0]];\n});\n\nfunction createNewChat(contactId, userId) {\n  var user = chatDb.user.find(function (_user) {\n    return _user.id === userId;\n  });\n  var chatId = FuseUtils.generateGUID();\n  user.chatList = [{\n    'chatId': chatId,\n    'contactId': contactId,\n    'lastMessageTime': ''\n  }].concat(_toConsumableArray(chatDb.user[0].chatList));\n  chatDb.chats = [].concat(_toConsumableArray(chatDb.chats), [{\n    'id': chatId,\n    'dialog': []\n  }]);\n  return chatId;\n}\n\nmock.onPost('/api/chat/send-message').reply(function (request) {\n  var data = JSON.parse(request.data);\n  var chatId = data.chatId,\n      message = data.message,\n      contactId = data.contactId;\n  var chat = chatDb.chats.find(function (_chat) {\n    return _chat.id === chatId;\n  });\n  chat.dialog = [].concat(_toConsumableArray(chat.dialog), [message]);\n  chatDb.user[0].chatList.find(function (_contact) {\n    return _contact.id === contactId;\n  }).lastMessageTime = message.time;\n  return [200, {\n    message: message,\n    userChatData: chatDb.user[0].chatList.find(function (_contact) {\n      return _contact.id === contactId;\n    })\n  }];\n});","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/@fake-db/db/chat-db.js"],"names":["mock","FuseUtils","_","chatDb","contacts","chats","user","onGet","reply","config","request","contactId","userId","response","find","_user","id","chat","chatList","_chat","chatId","createNewChat","userChatData","onPost","data","JSON","parse","merge","generateGUID","message","dialog","_contact","lastMessageTime","time"],"mappings":"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","sourcesContent":["import mock from './../mock';\nimport {FuseUtils} from '@fuse';\nimport _ from '@lodash';\n\nconst chatDb = {\n    contacts: [\n        {\n            'id'    : '5725a680b3249760ea21de52',\n            'name'  : 'Alice Freeman',\n            'avatar': 'assets/images/avatars/alice.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n            'unread': '2'\n        },\n        {\n            'id'    : '5725a680606588342058356d',\n            'name'  : 'Arnold',\n            'avatar': 'assets/images/avatars/Arnold.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n            'unread': '3'\n        },\n        {\n            'id'    : '5725a68009e20d0a9e9acf2a',\n            'name'  : 'Barrera',\n            'avatar': 'assets/images/avatars/Barrera.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...',\n            'unread': '1'\n        },\n        {\n            'id'    : '5725a6809fdd915739187ed5',\n            'name'  : 'Blair',\n            'avatar': 'assets/images/avatars/Blair.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a68007920cf75051da64',\n            'name'  : 'Boyle',\n            'avatar': 'assets/images/avatars/Boyle.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a68031fdbb1db2c1af47',\n            'name'  : 'Christy',\n            'avatar': 'assets/images/avatars/Christy.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680bc670af746c435e2',\n            'name'  : 'Copeland',\n            'avatar': 'assets/images/avatars/Copeland.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680e7eb988a58ddf303',\n            'name'  : 'Estes',\n            'avatar': 'assets/images/avatars/Estes.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680dcb077889f758961',\n            'name'  : 'Harper',\n            'avatar': 'assets/images/avatars/Harper.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6806acf030f9341e925',\n            'name'  : 'Helen',\n            'avatar': 'assets/images/avatars/Helen.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680ae1ae9a3c960d487',\n            'name'  : 'Henderson',\n            'avatar': 'assets/images/avatars/Henderson.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680b8d240c011dd224b',\n            'name'  : 'Josefina',\n            'avatar': 'assets/images/avatars/Josefina.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a68034cb3968e1f79eac',\n            'name'  : 'Katina',\n            'avatar': 'assets/images/avatars/Katina.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6801146cce777df2a08',\n            'name'  : 'Lily',\n            'avatar': 'assets/images/avatars/Lily.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6808a178bfd034d6ecf',\n            'name'  : 'Mai',\n            'avatar': 'assets/images/avatars/Mai.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680653c265f5c79b5a9',\n            'name'  : 'Nancy',\n            'avatar': 'assets/images/avatars/Nancy.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680bbcec3cc32a8488a',\n            'name'  : 'Nora',\n            'avatar': 'assets/images/avatars/Nora.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6803d87f1b77e17b62b',\n            'name'  : 'Odessa',\n            'avatar': 'assets/images/avatars/Odessa.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680e87cb319bd9bd673',\n            'name'  : 'Reyna',\n            'avatar': 'assets/images/avatars/Reyna.jpg',\n            'status': 'offline',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6802d10e277a0f35775',\n            'name'  : 'Shauna',\n            'avatar': 'assets/images/avatars/Shauna.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680aef1e5cf26dd3d1f',\n            'name'  : 'Shepard',\n            'avatar': 'assets/images/avatars/Shepard.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a680cd7efa56a45aea5d',\n            'name'  : 'Tillman',\n            'avatar': 'assets/images/avatars/Tillman.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : ''\n        },\n        {\n            'id'    : '5725a680fb65c91a82cb35e2',\n            'name'  : 'Trevino',\n            'avatar': 'assets/images/avatars/Trevino.jpg',\n            'status': 'away',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a68018c663044be49cbf',\n            'name'  : 'Tyson',\n            'avatar': 'assets/images/avatars/Tyson.jpg',\n            'status': 'do-not-disturb',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        },\n        {\n            'id'    : '5725a6809413bf8a0a5272b1',\n            'name'  : 'Velazquez',\n            'avatar': 'assets/images/avatars/Velazquez.jpg',\n            'status': 'online',\n            'mood'  : 'Lorem ipsum dolor sit amet, consectetur adipiscing elit...'\n        }\n    ],\n    chats   : [\n        {\n            'id'    : '1725a680b3249760ea21de52',\n            'dialog': [\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n                    'time'   : '2017-03-22T08:54:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n                    'time'   : '2017-03-22T08:55:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n                    'time'   : '2017-03-22T08:56:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-03-22T09:00:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n                    'time'   : '2017-03-22T09:02:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T09:05:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-03-22T09:14:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T09:16:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-03-22T09:17:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n                    'time'   : '2017-03-22T09:20:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T09:22:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-03-22T09:25:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n                    'time'   : '2017-03-22T09:27:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T09:33:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T09:34:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-03-22T09:35:28.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'It’s not my money, you know. I will eat my breakfast and then I will come to the meeting room.',\n                    'time'   : '2017-03-22T09:45:28.299Z'\n                },\n                {\n                    'who'    : '5725a680b3249760ea21de52',\n                    'message': 'You are the worst!',\n                    'time'   : '2017-03-22T10:00:28.299Z'\n                }\n            ]\n        },\n        {\n            'id'    : '2725a680b8d240c011dd2243',\n            'dialog': [\n                {\n                    'who'    : '5725a680606588342058356d',\n                    'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n                    'time'   : '2017-04-22T01:00:00.299Z'\n                },\n                {\n                    'who'    : '5725a6802d10e277a0f35724',\n                    'message': 'I’m having breakfast right now, can’t you wait for 10 minutes?',\n                    'time'   : '2017-04-22T01:05:00.299Z'\n                },\n                {\n                    'who'    : '5725a680606588342058356d',\n                    'message': 'We are losing money! Quick!',\n                    'time'   : '2017-04-22T01:10:00.299Z'\n                }\n            ]\n        },\n        {\n            'id'    : '3725a6809413bf8a0a5272b4',\n            'dialog': [\n                {\n                    'who'    : '5725a68009e20d0a9e9acf2a',\n                    'message': 'Quickly come to the meeting room 1B, we have a big server issue',\n                    'time'   : '2017-04-22T02:10:00.299Z'\n                }\n            ]\n        }\n    ],\n    user    : [\n        {\n            'id'      : '5725a6802d10e277a0f35724',\n            'name'    : 'John Doe',\n            'avatar'  : 'assets/images/avatars/profile.jpg',\n            'status'  : 'online',\n            'mood'    : 'it\\'s a status....not your diary...',\n            'chatList': [\n                {\n                    'chatId'         : '1725a680b3249760ea21de52',\n                    'contactId'      : '5725a680b3249760ea21de52',\n                    'lastMessageTime': '2017-06-12T02:10:18.931Z'\n                },\n                {\n                    'chatId'         : '2725a680b8d240c011dd2243',\n                    'contactId'      : '5725a680606588342058356d',\n                    'lastMessageTime': '2017-02-18T10:30:18.931Z'\n                },\n                {\n                    'chatId'         : '3725a6809413bf8a0a5272b4',\n                    'contactId'      : '5725a68009e20d0a9e9acf2a',\n                    'lastMessageTime': '2017-03-18T12:30:18.931Z'\n                }\n            ]\n        }\n    ]\n};\n\nmock.onGet('/api/chat/contacts').reply((config) => {\n    return [200, chatDb.contacts];\n});\n\nmock.onGet('/api/chat/get-chat').reply((request) => {\n    const {contactId, userId} = request;\n    let response;\n    const user = chatDb.user.find(_user => _user.id === userId);\n\n    const chat = user.chatList.find((_chat) => _chat.contactId === contactId);\n    const chatId = chat ? chat.chatId : createNewChat(contactId, userId);\n    response = chatDb.chats.find((_chat) => _chat.id === chatId);\n    return [\n        200, {\n            chat        : response,\n            userChatData: user.chatList.find((_chat) => _chat.contactId === contactId)\n        }\n    ];\n});\n\nmock.onGet('/api/chat/user').reply((config) => {\n    return [200, chatDb.user[0]];\n});\n\nmock.onPost('/api/chat/user/data').reply((request) => {\n    const data = JSON.parse(request.data);\n    chatDb.user[0] = _.merge({}, chatDb.user[0], data);\n    return [200, chatDb.user[0]];\n});\n\nfunction createNewChat(contactId, userId)\n{\n    const user = chatDb.user.find(_user => _user.id === userId);\n    let chatId = FuseUtils.generateGUID();\n    user.chatList = [\n        {\n            'chatId'         : chatId,\n            'contactId'      : contactId,\n            'lastMessageTime': ''\n        },\n        ...chatDb.user[0].chatList\n    ];\n    chatDb.chats = [\n        ...chatDb.chats,\n        {\n            'id'    : chatId,\n            'dialog': []\n        }\n    ];\n    return chatId;\n}\n\nmock.onPost('/api/chat/send-message').reply((request) => {\n    const data = JSON.parse(request.data);\n    const {chatId, message, contactId} = data;\n    let chat = chatDb.chats.find(_chat => _chat.id === chatId);\n    chat.dialog = [\n        ...chat.dialog,\n        message\n    ];\n    chatDb.user[0].chatList.find(_contact => _contact.id === contactId).lastMessageTime = message.time;\n    return [\n        200, {\n            message,\n            userChatData: chatDb.user[0].chatList.find(_contact => _contact.id === contactId)\n        }\n    ];\n});\n\n"]},"metadata":{},"sourceType":"module"}