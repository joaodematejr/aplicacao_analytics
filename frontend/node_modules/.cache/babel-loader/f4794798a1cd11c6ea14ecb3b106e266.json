{"ast":null,"code":"import _classCallCheck from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/scrumboard/board/BoardCard.js\";\nimport React, { Component } from 'react';\nimport { Card, Typography, Avatar, Icon, Tooltip, withStyles } from '@material-ui/core';\nimport { Draggable } from 'react-beautiful-dnd';\nimport classNames from 'classnames';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport connect from 'react-redux/es/connect/connect';\nimport moment from 'moment';\nimport _ from '@lodash';\nimport * as Actions from '../store/actions';\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      transitionProperty: 'box-shadow',\n      transitionDuration: theme.transitions.duration.short,\n      transitionTimingFunction: theme.transitions.easing.easeInOut\n    }\n  };\n};\n\nvar BoardCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BoardCard, _Component);\n\n  function BoardCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BoardCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BoardCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleCardClick = function (ev, card) {\n      ev.preventDefault();\n\n      _this.props.openCardDialog(card);\n    };\n\n    _this.checkItemsChecked = function (card) {\n      return _.sum(card.checklists.map(function (list) {\n        return _.sum(list.checkItems.map(function (x) {\n          return x.checked ? 1 : 0;\n        }));\n      }));\n    };\n\n    _this.checkItems = function (card) {\n      return _.sum(card.checklists.map(function (x) {\n        return x.checkItems.length;\n      }));\n    };\n\n    _this.commentsCount = function (card) {\n      return _.sum(card.activities.map(function (x) {\n        return x.type === 'comment' ? 1 : 0;\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(BoardCard, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          cardId = _this$props.cardId,\n          index = _this$props.index,\n          board = _this$props.board;\n\n      var card = _.find(board.cards, {\n        id: cardId\n      });\n\n      var checkItemsChecked = this.checkItemsChecked(card);\n      var checkItems = this.checkItems(card);\n      var commentsCount = this.commentsCount(card);\n      return React.createElement(Draggable, {\n        draggableId: cardId,\n        index: index,\n        type: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, function (provided, snapshot) {\n        return React.createElement(\"div\", Object.assign({\n          ref: provided.innerRef\n        }, provided.draggableProps, provided.dragHandleProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }), React.createElement(Card, {\n          className: classNames(classes.card, \"w-full mb-16 rounded-4 cursor-pointer border-1\"),\n          elevation: snapshot.isDragging ? 3 : 0,\n          onClick: function onClick(ev) {\n            return _this2.handleCardClick(ev, card);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, board.settings.cardCoverImages && card.idAttachmentCover !== '' && React.createElement(\"img\", {\n          className: \"block\",\n          src: _.find(card.attachments, {\n            id: card.idAttachmentCover\n          }).src,\n          alt: \"card cover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"p-16 pb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, card.idLabels.length > 0 && React.createElement(\"div\", {\n          className: \"flex flex-wrap mb-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, card.idLabels.map(function (id) {\n          var label = _.find(board.labels, {\n            id: id\n          });\n\n          return React.createElement(Tooltip, {\n            title: label.name,\n            key: id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: classNames(label.class, \"w-32  h-6 rounded-6 mr-6 mb-6\"),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }));\n        })), React.createElement(Typography, {\n          className: \"font-600 mb-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, card.name), (card.due || checkItems > 0) && React.createElement(\"div\", {\n          className: \"flex items-center mb-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, card.due && React.createElement(\"div\", {\n          className: classNames(\"flex items-center px-8 py-4 mr-8 rounded-sm\", moment() > moment(card.due) ? \"bg-red text-white\" : \"bg-green text-white\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          className: \"text-16 mr-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"access_time\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, moment(card.due).format(\"MMM Do YY\"))), checkItems > 0 && React.createElement(\"div\", {\n          className: classNames(\"flex items-center px-8 py-4 mr-8 rounded-sm\", checkItemsChecked === checkItems ? \"bg-green text-white\" : \"bg-grey-dark text-white\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          className: \"text-16 mr-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"check_circle\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, checkItemsChecked), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"/\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, checkItems))), card.idMembers.length > 0 && React.createElement(\"div\", {\n          className: \"flex flex-wrap mb-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, card.idMembers.map(function (id) {\n          var member = _.find(board.members, {\n            id: id\n          });\n\n          return React.createElement(Tooltip, {\n            title: member.name,\n            key: id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, React.createElement(Avatar, {\n            className: \"mr-8 w-32 h-32\",\n            src: member.avatar,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112\n            },\n            __self: this\n          }));\n        }), React.createElement(\"div\", {\n          className: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"flex justify-between h-48 px-16 border-t-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"flex items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, card.subscribed && React.createElement(Icon, {\n          className: \"text-18 mr-12\",\n          color: \"action\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"remove_red_eye\"), card.description !== '' && React.createElement(Icon, {\n          className: \"text-18 mr-12\",\n          color: \"action\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"description\")), React.createElement(\"div\", {\n          className: \"flex items-center justify-end\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, card.attachments && React.createElement(\"span\", {\n          className: \"flex items-center ml-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          className: \"text-18 mr-8\",\n          color: \"action\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"attachment\"), React.createElement(Typography, {\n          color: \"textSecondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, card.attachments.length)), commentsCount > 0 && React.createElement(\"span\", {\n          className: \"flex items-center ml-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          className: \"text-18 mr-8\",\n          color: \"action\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"comment\"), React.createElement(Typography, {\n          color: \"textSecondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, commentsCount))))));\n      });\n    }\n  }]);\n\n  return BoardCard;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    openCardDialog: Actions.openCardDialog\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var scrumboardApp = _ref.scrumboardApp;\n  return {\n    board: scrumboardApp.board\n  };\n}\n\nexport default withStyles(styles, {\n  withTheme: true\n})(withRouter(connect(mapStateToProps, mapDispatchToProps)(BoardCard)));","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/scrumboard/board/BoardCard.js"],"names":["React","Component","Card","Typography","Avatar","Icon","Tooltip","withStyles","Draggable","classNames","bindActionCreators","withRouter","connect","moment","_","Actions","styles","theme","card","transitionProperty","transitionDuration","transitions","duration","short","transitionTimingFunction","easing","easeInOut","BoardCard","handleCardClick","ev","preventDefault","props","openCardDialog","checkItemsChecked","sum","checklists","map","list","checkItems","x","checked","length","commentsCount","activities","type","classes","cardId","index","board","find","cards","id","provided","snapshot","innerRef","draggableProps","dragHandleProps","isDragging","settings","cardCoverImages","idAttachmentCover","attachments","src","idLabels","label","labels","name","class","due","format","idMembers","member","members","avatar","subscribed","description","mapDispatchToProps","dispatch","mapStateToProps","scrumboardApp","withTheme"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Card, Typography, Avatar, Icon, Tooltip, withStyles} from '@material-ui/core';\nimport {Draggable} from 'react-beautiful-dnd';\nimport classNames from 'classnames';\nimport {bindActionCreators} from 'redux';\nimport {withRouter} from 'react-router-dom';\nimport connect from 'react-redux/es/connect/connect';\nimport moment from 'moment';\nimport _ from '@lodash';\nimport * as Actions from '../store/actions';\n\nconst styles = theme => ({\n    card: {\n        transitionProperty      : 'box-shadow',\n        transitionDuration      : theme.transitions.duration.short,\n        transitionTimingFunction: theme.transitions.easing.easeInOut\n    }\n});\n\nclass BoardCard extends Component {\n\n    handleCardClick = (ev, card) => {\n        ev.preventDefault();\n        this.props.openCardDialog(card)\n    };\n\n    checkItemsChecked = (card) => {\n        return _.sum(card.checklists.map(list => _.sum(list.checkItems.map(x => (x.checked ? 1 : 0)))));\n    };\n\n    checkItems = (card) => {\n        return _.sum(card.checklists.map(x => x.checkItems.length));\n    };\n\n    commentsCount = (card) => {\n        return _.sum(card.activities.map(x => (x.type === 'comment' ? 1 : 0)));\n    };\n\n    render()\n    {\n        const {classes, cardId, index, board} = this.props;\n        const card = _.find(board.cards, {id: cardId});\n        const checkItemsChecked = this.checkItemsChecked(card);\n        const checkItems = this.checkItems(card);\n        const commentsCount = this.commentsCount(card);\n\n        return (\n            <Draggable draggableId={cardId} index={index} type=\"card\">\n                {(provided, snapshot) => (\n                    <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                    >\n                        <Card\n                            className={classNames(classes.card, \"w-full mb-16 rounded-4 cursor-pointer border-1\")}\n                            elevation={snapshot.isDragging ? 3 : 0}\n                            onClick={(ev) => this.handleCardClick(ev, card)}\n                        >\n\n                            {board.settings.cardCoverImages && card.idAttachmentCover !== '' && (\n                                <img className=\"block\" src={_.find(card.attachments, {id: card.idAttachmentCover}).src} alt=\"card cover\"/>\n                            )}\n\n                            <div className=\"p-16 pb-0\">\n\n                                {card.idLabels.length > 0 && (\n                                    <div className=\"flex flex-wrap mb-8\">\n                                        {card.idLabels.map(id => {\n                                            const label = _.find(board.labels, {id});\n                                            return (\n                                                <Tooltip title={label.name} key={id}>\n                                                    <div className={classNames(label.class, \"w-32  h-6 rounded-6 mr-6 mb-6\")}/>\n                                                </Tooltip>\n                                            );\n                                        })}\n                                    </div>\n                                )}\n\n                                <Typography className=\"font-600 mb-12\">{card.name}</Typography>\n\n                                {(card.due || checkItems > 0) && (\n                                    <div className=\"flex items-center mb-12\">\n                                        {card.due && (\n                                            <div\n                                                className={classNames(\"flex items-center px-8 py-4 mr-8 rounded-sm\", moment() > moment(card.due) ? \"bg-red text-white\" : \"bg-green text-white\")}>\n                                                <Icon className=\"text-16 mr-4\">access_time</Icon>\n                                                <span>{moment(card.due).format(\"MMM Do YY\")}</span>\n                                            </div>\n                                        )}\n\n                                        {checkItems > 0 && (\n                                            <div\n                                                className={classNames(\"flex items-center px-8 py-4 mr-8 rounded-sm\", checkItemsChecked === checkItems ? \"bg-green text-white\" : \"bg-grey-dark text-white\")}\n                                            >\n                                                <Icon className=\"text-16 mr-4\">check_circle</Icon>\n                                                <span>{checkItemsChecked}</span>\n                                                <span>/</span>\n                                                <span>{checkItems}</span>\n                                            </div>\n                                        )}\n\n                                    </div>\n                                )}\n\n                                {card.idMembers.length > 0 && (\n                                    <div className=\"flex flex-wrap mb-12\">\n                                        {card.idMembers.map(id => {\n                                            const member = _.find(board.members, {id});\n                                            return (\n                                                <Tooltip title={member.name} key={id}>\n                                                    <Avatar className=\"mr-8 w-32 h-32\" src={member.avatar}/>\n                                                </Tooltip>\n                                            )\n                                        })}\n                                        <div className=\"\">\n                                        </div>\n                                    </div>\n                                )}\n\n                            </div>\n\n                            <div className=\"flex justify-between h-48 px-16 border-t-1\">\n                                <div className=\"flex items-center\">\n                                    {card.subscribed && (\n                                        <Icon className=\"text-18 mr-12\" color=\"action\">remove_red_eye</Icon>\n                                    )}\n\n                                    {card.description !== '' && (\n                                        <Icon className=\"text-18 mr-12\" color=\"action\">description</Icon>\n                                    )}\n                                </div>\n\n                                <div className=\"flex items-center justify-end\">\n                                    {card.attachments && (\n                                        <span className=\"flex items-center ml-12\">\n                                            <Icon className=\"text-18 mr-8\" color=\"action\">attachment</Icon>\n                                            <Typography color=\"textSecondary\">{card.attachments.length}</Typography>\n                                        </span>\n                                    )}\n                                    {commentsCount > 0 && (\n                                        <span className=\"flex items-center ml-12\">\n                                            <Icon className=\"text-18 mr-8\" color=\"action\">comment</Icon>\n                                            <Typography color=\"textSecondary\">{commentsCount}</Typography>\n                                        </span>\n                                    )}\n                                </div>\n                            </div>\n                        </Card>\n                    </div>\n                )}\n            </Draggable>\n        );\n    }\n}\n\n\nfunction mapDispatchToProps(dispatch)\n{\n    return bindActionCreators({\n        openCardDialog: Actions.openCardDialog\n    }, dispatch);\n}\n\nfunction mapStateToProps({scrumboardApp})\n{\n    return {\n        board: scrumboardApp.board\n    }\n}\n\nexport default withStyles(styles, {withTheme: true})(withRouter(connect(mapStateToProps, mapDispatchToProps)(BoardCard)));\n"]},"metadata":{},"sourceType":"module"}