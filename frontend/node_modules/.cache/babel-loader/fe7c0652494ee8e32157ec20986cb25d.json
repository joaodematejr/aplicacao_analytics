{"ast":null,"code":"import axios from 'axios';\nimport { setselectedContactId } from './contacts.actions';\nimport { closeMobileChatsSidebar } from './sidebars.actions';\nexport var GET_CHAT = '[CHAT APP] GET CHAT';\nexport var REMOVE_CHAT = '[CHAT APP] REMOVE CHAT';\nexport var SEND_MESSAGE = '[CHAT APP] SEND MESSAGE';\nexport function getChat(contactId) {\n  return function (dispatch, getState) {\n    var userId = getState().chatPanel.user.id;\n    var request = axios.get('/api/chat/get-chat', {\n      contactId: contactId,\n      userId: userId\n    });\n    return request.then(function (response) {\n      dispatch(setselectedContactId(contactId));\n      dispatch(closeMobileChatsSidebar());\n      return dispatch({\n        type: GET_CHAT,\n        chat: response.data.chat,\n        userChatData: response.data.userChatData\n      });\n    });\n  };\n}\nexport function removeChat() {\n  return {\n    type: REMOVE_CHAT\n  };\n}\nexport function sendMessage(messageText, chatId, userId) {\n  var message = {\n    'who': userId,\n    'message': messageText,\n    'time': new Date()\n  };\n  var request = axios.post('/api/chat/send-message', {\n    chatId: chatId,\n    message: message\n  });\n  return function (dispatch) {\n    return request.then(function (response) {\n      return dispatch({\n        type: SEND_MESSAGE,\n        message: response.data.message,\n        userChatData: response.data.userChatData\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/chat/store/actions/chat.actions.js"],"names":["axios","setselectedContactId","closeMobileChatsSidebar","GET_CHAT","REMOVE_CHAT","SEND_MESSAGE","getChat","contactId","dispatch","getState","userId","chatPanel","user","id","request","get","then","response","type","chat","data","userChatData","removeChat","sendMessage","messageText","chatId","message","Date","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,oBAAR,QAAmC,oBAAnC;AACA,SAAQC,uBAAR,QAAsC,oBAAtC;AAEA,OAAO,IAAMC,QAAQ,GAAG,qBAAjB;AACP,OAAO,IAAMC,WAAW,GAAG,wBAApB;AACP,OAAO,IAAMC,YAAY,GAAG,yBAArB;AAEP,OAAO,SAASC,OAAT,CAAiBC,SAAjB,EACP;AACI,SAAO,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAAA,QAChBC,MADgB,GACND,QAAQ,GAAGE,SAAX,CAAqBC,IADf,CACpBC,EADoB;AAE3B,QAAMC,OAAO,GAAGd,KAAK,CAACe,GAAN,CAAU,oBAAV,EAAgC;AAC5CR,MAAAA,SAAS,EAATA,SAD4C;AAE5CG,MAAAA,MAAM,EAANA;AAF4C,KAAhC,CAAhB;AAKA,WAAOI,OAAO,CAACE,IAAR,CAAa,UAACC,QAAD,EAAc;AAE9BT,MAAAA,QAAQ,CAACP,oBAAoB,CAACM,SAAD,CAArB,CAAR;AAEAC,MAAAA,QAAQ,CAACN,uBAAuB,EAAxB,CAAR;AAEA,aAAOM,QAAQ,CAAC;AACZU,QAAAA,IAAI,EAAUf,QADF;AAEZgB,QAAAA,IAAI,EAAUF,QAAQ,CAACG,IAAT,CAAcD,IAFhB;AAGZE,QAAAA,YAAY,EAAEJ,QAAQ,CAACG,IAAT,CAAcC;AAHhB,OAAD,CAAf;AAKH,KAXM,CAAP;AAYH,GAnBD;AAoBH;AAED,OAAO,SAASC,UAAT,GACP;AACI,SAAO;AACHJ,IAAAA,IAAI,EAAEd;AADH,GAAP;AAGH;AAED,OAAO,SAASmB,WAAT,CAAqBC,WAArB,EAAkCC,MAAlC,EAA0Cf,MAA1C,EACP;AACI,MAAMgB,OAAO,GAAG;AACZ,WAAWhB,MADC;AAEZ,eAAWc,WAFC;AAGZ,YAAW,IAAIG,IAAJ;AAHC,GAAhB;AAMA,MAAMb,OAAO,GAAGd,KAAK,CAAC4B,IAAN,CAAW,wBAAX,EAAqC;AACjDH,IAAAA,MAAM,EAANA,MADiD;AAEjDC,IAAAA,OAAO,EAAPA;AAFiD,GAArC,CAAhB;AAKA,SAAO,UAAClB,QAAD;AAAA,WACHM,OAAO,CAACE,IAAR,CAAa,UAACC,QAAD,EAAc;AACnB,aAAOT,QAAQ,CAAC;AACZU,QAAAA,IAAI,EAAUb,YADF;AAEZqB,QAAAA,OAAO,EAAOT,QAAQ,CAACG,IAAT,CAAcM,OAFhB;AAGZL,QAAAA,YAAY,EAAEJ,QAAQ,CAACG,IAAT,CAAcC;AAHhB,OAAD,CAAf;AAKH,KANL,CADG;AAAA,GAAP;AASH","sourcesContent":["import axios from 'axios';\nimport {setselectedContactId} from './contacts.actions';\nimport {closeMobileChatsSidebar} from './sidebars.actions';\n\nexport const GET_CHAT = '[CHAT APP] GET CHAT';\nexport const REMOVE_CHAT = '[CHAT APP] REMOVE CHAT';\nexport const SEND_MESSAGE = '[CHAT APP] SEND MESSAGE';\n\nexport function getChat(contactId)\n{\n    return (dispatch, getState) => {\n        const {id: userId} = getState().chatPanel.user;\n        const request = axios.get('/api/chat/get-chat', {\n            contactId,\n            userId\n        });\n\n        return request.then((response) => {\n\n            dispatch(setselectedContactId(contactId));\n\n            dispatch(closeMobileChatsSidebar());\n\n            return dispatch({\n                type        : GET_CHAT,\n                chat        : response.data.chat,\n                userChatData: response.data.userChatData\n            });\n        });\n    }\n}\n\nexport function removeChat()\n{\n    return {\n        type: REMOVE_CHAT\n    };\n}\n\nexport function sendMessage(messageText, chatId, userId)\n{\n    const message = {\n        'who'    : userId,\n        'message': messageText,\n        'time'   : new Date()\n    };\n\n    const request = axios.post('/api/chat/send-message', {\n        chatId,\n        message\n    });\n\n    return (dispatch) =>\n        request.then((response) => {\n                return dispatch({\n                    type        : SEND_MESSAGE,\n                    message     : response.data.message,\n                    userChatData: response.data.userChatData\n                })\n            }\n        );\n}\n"]},"metadata":{},"sourceType":"module"}