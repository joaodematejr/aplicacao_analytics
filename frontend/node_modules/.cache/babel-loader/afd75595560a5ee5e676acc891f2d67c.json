{"ast":null,"code":"import _toConsumableArray from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/scrumboard/board/dialogs/card/checklist/CardChecklist.js\";\nimport React, { Component } from 'react';\nimport { Icon, Typography, Menu, MenuItem, LinearProgress, List, ListItemText, ListItemIcon, IconButton, TextField, InputAdornment, ClickAwayListener } from '@material-ui/core';\nimport CardChecklistItem from './CardChecklistItem';\nimport CardAddChecklistItem from './CardAddChecklistItem';\nimport _ from '@lodash';\n\nvar CardChecklist =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CardChecklist, _Component);\n\n  function CardChecklist() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CardChecklist);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CardChecklist)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      anchorEl: null,\n      renameForm: false,\n      renameTitle: _this.props.checklist.name,\n      checklist: _this.props.checklist\n    };\n\n    _this.handleClick = function (event) {\n      _this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        anchorEl: null\n      });\n    };\n\n    _this.handleListItemChange = function (item) {\n      var index = _this.state.checklist.checkItems.findIndex(function (x) {\n        return x.id === item.id;\n      });\n\n      _this.setState(_.setIn(_this.state, \"checklist.checkItems[\".concat(index, \"]\"), item));\n    };\n\n    _this.handleListItemRemove = function (id) {\n      _this.setState(_.setIn(_this.state, 'checklist.checkItems', _.reject(_this.state.checklist.checkItems, {\n        id: id\n      })));\n    };\n\n    _this.checkItemsChecked = function () {\n      return _.sum(_this.state.checklist.checkItems.map(function (x) {\n        return x.checked ? 1 : 0;\n      }));\n    };\n\n    _this.handleListItemAdd = function (item) {\n      _this.setState(_.setIn(_this.state, 'checklist.checkItems', [].concat(_toConsumableArray(_this.state.checklist.checkItems), [item])));\n    };\n\n    _this.renameFormToggle = function (state) {\n      _this.setState({\n        renameForm: state,\n        renameTitle: _this.state.checklist.name\n      });\n    };\n\n    _this.onRenameTitleChange = function (ev) {\n      _this.setState({\n        renameTitle: ev.target.value\n      });\n    };\n\n    _this.renameTitleSubmit = function (ev) {\n      ev.preventDefault();\n\n      if (_this.state.renameTitle === '') {\n        _this.renameFormToggle(false);\n\n        return;\n      }\n\n      _this.setState(_.setIn(_this.state, 'checklist.name', _this.state.renameTitle));\n\n      _this.renameFormToggle(false);\n    };\n\n    return _this;\n  }\n\n  _createClass(CardChecklist, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (this.state.checklist && prevState.checklist && !_.isEqual(this.state.checklist, prevState.checklist)) {\n        this.props.onCheckListChange(this.state.checklist);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var onRemoveCheckList = this.props.onRemoveCheckList;\n      var _this$state = this.state,\n          anchorEl = _this$state.anchorEl,\n          checklist = _this$state.checklist,\n          renameTitle = _this$state.renameTitle,\n          renameForm = _this$state.renameForm;\n\n      if (!checklist) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"mb-24\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex items-center justify-between mt-16 mb-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        className: \"text-20 mr-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"check_box\"), renameForm ? React.createElement(ClickAwayListener, {\n        onClickAway: function onClickAway() {\n          return _this2.renameFormToggle(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.renameTitleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        value: renameTitle,\n        onChange: this.onRenameTitleChange,\n        variant: \"outlined\",\n        margin: \"dense\",\n        InputProps: {\n          endAdornment: React.createElement(InputAdornment, {\n            position: \"end\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }, React.createElement(IconButton, {\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          }, \"check\")))\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }))) : React.createElement(Typography, {\n        className: \"text-16 font-600\",\n        onClick: function onClick() {\n          return _this2.renameFormToggle(true);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, checklist.name)), React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-owns\": anchorEl ? 'actions-menu' : null,\n        \"aria-haspopup\": \"true\",\n        onClick: this.handleClick,\n        variant: \"outlined\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        className: \"text-20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"more_vert\")), React.createElement(Menu, {\n        id: \"actions-menu\",\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        onClick: onRemoveCheckList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"delete\")), React.createElement(ListItemText, {\n        primary: \"Remove Checklist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: function onClick() {\n          return _this2.renameFormToggle(true);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"edit\")), React.createElement(ListItemText, {\n        primary: \"Rename Checklist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex items-center pl-16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: \"flex font-600 mr-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, this.checkItemsChecked() + ' / ' + checklist.checkItems.length), React.createElement(LinearProgress, {\n        className: \"flex flex-1\",\n        variant: \"determinate\",\n        color: \"secondary\",\n        value: 100 * this.checkItemsChecked() / checklist.checkItems.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(List, {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, checklist.checkItems.map(function (checkItem) {\n        return React.createElement(CardChecklistItem, {\n          item: checkItem,\n          key: checkItem.id,\n          onListItemChange: _this2.handleListItemChange,\n          onListItemRemove: function onListItemRemove() {\n            return _this2.handleListItemRemove(checkItem.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        });\n      }), React.createElement(CardAddChecklistItem, {\n        onListItemAdd: function onListItemAdd(item) {\n          return _this2.handleListItemAdd(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return CardChecklist;\n}(Component);\n\nexport default CardChecklist;","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/scrumboard/board/dialogs/card/checklist/CardChecklist.js"],"names":["React","Component","Icon","Typography","Menu","MenuItem","LinearProgress","List","ListItemText","ListItemIcon","IconButton","TextField","InputAdornment","ClickAwayListener","CardChecklistItem","CardAddChecklistItem","_","CardChecklist","state","anchorEl","renameForm","renameTitle","props","checklist","name","handleClick","event","setState","currentTarget","handleClose","handleListItemChange","item","index","checkItems","findIndex","x","id","setIn","handleListItemRemove","reject","checkItemsChecked","sum","map","checked","handleListItemAdd","renameFormToggle","onRenameTitleChange","ev","target","value","renameTitleSubmit","preventDefault","prevProps","prevState","snapshot","isEqual","onCheckListChange","onRemoveCheckList","endAdornment","Boolean","length","checkItem"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Icon, Typography, Menu, MenuItem, LinearProgress, List, ListItemText, ListItemIcon, IconButton, TextField, InputAdornment, ClickAwayListener} from '@material-ui/core';\nimport CardChecklistItem from './CardChecklistItem';\nimport CardAddChecklistItem from './CardAddChecklistItem';\nimport _ from '@lodash';\n\nclass CardChecklist extends Component {\n\n    state = {\n        anchorEl   : null,\n        renameForm : false,\n        renameTitle: this.props.checklist.name,\n        checklist  : this.props.checklist\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot)\n    {\n        if ( this.state.checklist &&\n            prevState.checklist &&\n            !_.isEqual(this.state.checklist, prevState.checklist) )\n        {\n            this.props.onCheckListChange(this.state.checklist);\n        }\n    }\n\n    handleClick = event => {\n        this.setState({anchorEl: event.currentTarget});\n    };\n\n    handleClose = () => {\n        this.setState({anchorEl: null});\n    };\n\n    handleListItemChange = (item) => {\n        const index = this.state.checklist.checkItems.findIndex((x) => x.id === item.id);\n        this.setState(_.setIn(this.state, `checklist.checkItems[${index}]`, item));\n    };\n\n    handleListItemRemove = (id) => {\n        this.setState(_.setIn(this.state, 'checklist.checkItems', _.reject(this.state.checklist.checkItems, {id})));\n    };\n\n    checkItemsChecked = () => {\n        return _.sum(this.state.checklist.checkItems.map(x => (x.checked ? 1 : 0)));\n    };\n\n    handleListItemAdd = (item) => {\n        this.setState(_.setIn(this.state, 'checklist.checkItems', [...this.state.checklist.checkItems, item]));\n    };\n\n    renameFormToggle = (state) => {\n        this.setState({\n            renameForm : state,\n            renameTitle: this.state.checklist.name\n        })\n    };\n\n    onRenameTitleChange = (ev) => {\n        this.setState({renameTitle: ev.target.value})\n    };\n\n    renameTitleSubmit = (ev) => {\n        ev.preventDefault();\n        if ( this.state.renameTitle === '' )\n        {\n            this.renameFormToggle(false);\n            return;\n        }\n        this.setState(_.setIn(this.state, 'checklist.name', this.state.renameTitle));\n        this.renameFormToggle(false);\n    };\n\n    render()\n    {\n        const {onRemoveCheckList} = this.props;\n        const {anchorEl, checklist, renameTitle, renameForm} = this.state;\n\n        if ( !checklist )\n        {\n            return null;\n        }\n        return (\n            <div className=\"mb-24\">\n\n                <div className=\"flex items-center justify-between mt-16 mb-12\">\n                    <div className=\"flex items-center\">\n                        <Icon className=\"text-20 mr-8\">check_box</Icon>\n                        {renameForm ? (\n                            <ClickAwayListener onClickAway={() => this.renameFormToggle(false)}>\n                                <form onSubmit={this.renameTitleSubmit}>\n                                    <TextField\n                                        value={renameTitle}\n                                        onChange={this.onRenameTitleChange}\n                                        variant=\"outlined\"\n                                        margin=\"dense\"\n                                        InputProps={{\n                                            endAdornment: (\n                                                <InputAdornment position=\"end\">\n                                                    <IconButton type=\"submit\">\n                                                        <Icon>check</Icon>\n                                                    </IconButton>\n                                                </InputAdornment>\n                                            )\n                                        }}\n                                    />\n                                </form>\n                            </ClickAwayListener>\n                        ) : (\n                            <Typography\n                                className=\"text-16 font-600\"\n                                onClick={() => this.renameFormToggle(true)}\n                            >\n                                {checklist.name}\n                            </Typography>\n                        )}\n\n                    </div>\n                    <div className=\"\">\n                        <IconButton\n                            aria-owns={anchorEl ? 'actions-menu' : null}\n                            aria-haspopup=\"true\"\n                            onClick={this.handleClick}\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            <Icon className=\"text-20\">more_vert</Icon>\n                        </IconButton>\n                        <Menu\n                            id=\"actions-menu\"\n                            anchorEl={anchorEl}\n                            open={Boolean(anchorEl)}\n                            onClose={this.handleClose}\n                        >\n                            <MenuItem onClick={onRemoveCheckList}>\n                                <ListItemIcon>\n                                    <Icon>delete</Icon>\n                                </ListItemIcon>\n                                <ListItemText primary=\"Remove Checklist\"/>\n                            </MenuItem>\n                            <MenuItem onClick={() => this.renameFormToggle(true)}>\n                                <ListItemIcon>\n                                    <Icon>edit</Icon>\n                                </ListItemIcon>\n                                <ListItemText primary=\"Rename Checklist\"/>\n                            </MenuItem>\n                        </Menu>\n                    </div>\n                </div>\n\n                <div className=\"\">\n                    <div className=\"flex items-center pl-16\">\n                        <Typography className=\"flex font-600 mr-12\">\n                            {this.checkItemsChecked() + ' / ' + checklist.checkItems.length}\n                        </Typography>\n                        <LinearProgress\n                            className=\"flex flex-1\"\n                            variant=\"determinate\"\n                            color=\"secondary\"\n                            value={100 * this.checkItemsChecked() / checklist.checkItems.length}\n                        />\n                    </div>\n                    <List className=\"\">\n                        {checklist.checkItems.map(checkItem => (\n                            <CardChecklistItem\n                                item={checkItem}\n                                key={checkItem.id}\n                                onListItemChange={this.handleListItemChange}\n                                onListItemRemove={() => this.handleListItemRemove(checkItem.id)}\n                            />\n                        ))}\n                        <CardAddChecklistItem\n                            onListItemAdd={(item) => this.handleListItemAdd(item)}\n                        />\n                    </List>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CardChecklist;\n"]},"metadata":{},"sourceType":"module"}