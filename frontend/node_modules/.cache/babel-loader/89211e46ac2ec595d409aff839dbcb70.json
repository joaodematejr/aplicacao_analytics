{"ast":null,"code":"import _classCallCheck from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/notes/note-form/NoteForm.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Tooltip, Button, Icon, Input, Typography, IconButton, Fab } from '@material-ui/core';\nimport { FuseScrollbars } from '@fuse';\nimport moment from 'moment';\nimport _ from '@lodash';\nimport { withRouter } from 'react-router-dom';\nimport NoteReminderLabel from 'app/main/apps/notes/NoteReminderLabel';\nimport NoteLabel from 'app/main/apps/notes/NoteLabel';\nimport NoteModel from 'app/main/apps/notes/model/NoteModel';\nimport NoteFormList from './checklist/NoteFormList';\nimport NoteFormReminder from './NoteFormReminder';\nimport NoteFormUploadImage from './NoteFormUploadImage';\nimport NoteFormLabelMenu from './NoteFormLabelMenu';\nvar propTypes = {};\nvar defaultProps = {\n  variant: \"edit\",\n  note: null\n};\n\nvar NoteForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NoteForm, _Component);\n\n  function NoteForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NoteForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NoteForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      note: _.merge({}, new NoteModel(), _this.props.note, _this.props.match.params.labelId ? {\n        labels: [_this.props.match.params.labelId]\n      } : null, _this.props.match.params.id === \"archive\" ? {\n        archive: true\n      } : null),\n      showList: false\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_.setIn(_this.state, event.target.name, event.target.type === 'checkbox' ? event.target.checked : event.target.value));\n    };\n\n    _this.handleOnCreate = function (event) {\n      if (!_this.props.onCreate) {\n        return;\n      }\n\n      _this.props.onCreate(_this.state.note);\n    };\n\n    _this.handleToggleList = function () {\n      _this.setState({\n        showList: !_this.state.showList\n      });\n    };\n\n    _this.handleDateChange = function (date) {\n      _this.setState(_.setIn(_this.state, \"note.reminder\", date));\n    };\n\n    _this.handleChecklistChange = function (checklist) {\n      _this.setState(_.setIn(_this.state, \"note.checklist\", checklist));\n    };\n\n    _this.handleRemoveLabel = function (id) {\n      _this.setState(_.setIn(_this.state, \"note.labels\", _this.state.note.labels.filter(function (_id) {\n        return _id !== id;\n      })));\n    };\n\n    _this.handleLabelsChange = function (labels) {\n      _this.setState(_.setIn(_this.state, \"note.labels\", labels));\n    };\n\n    _this.handleRemoveImage = function (e) {\n      _this.setState(_.setIn(_this.state, \"note.image\", \"\"));\n    };\n\n    _this.handleArchiveToggle = function (e) {\n      _this.setState(_.setIn(_this.state, \"note.archive\", !_this.state.archive));\n\n      if (_this.props.variant === \"new\") {\n        setTimeout(function () {\n          return _this.handleOnCreate();\n        });\n      }\n    };\n\n    _this.handleUploadChange = function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.readAsBinaryString(file);\n\n      reader.onload = function () {\n        _this.setState(_.setIn(_this.state, \"note.image\", \"data:\".concat(file.type, \";base64,\").concat(btoa(reader.result))));\n      };\n\n      reader.onerror = function () {\n        console.log(\"error on load image\");\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(NoteForm, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (prevState.note && this.state.note && !_.isEqual(prevState.note, this.state.note) && this.props.onChange) {\n        this.props.onChange(this.state.note);\n      }\n    }\n  }, {\n    key: \"newFormButtonDisabled\",\n    value: function newFormButtonDisabled() {\n      var note = this.state.note;\n      return note.title === \"\" && note.image === \"\" && note.description === \"\" && note.checklist.length === 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          note = _this$state.note,\n          showList = _this$state.showList;\n      var variant = this.props.variant;\n\n      if (!note) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"flex flex-col w-full\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(FuseScrollbars, {\n        className: \"flex flex-auto w-full max-h-640\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"w-full\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, note.image && note.image !== \"\" && React.createElement(\"div\", {\n        className: \"relative\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: note.image,\n        className: \"w-full block\",\n        alt: \"note\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(Fab, {\n        className: \"absolute pin-r pin-b m-8\",\n        variant: \"extended\",\n        size: \"small\",\n        color: \"secondary\",\n        \"aria-label\": \"Delete Image\",\n        onClick: this.handleRemoveImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"delete\"))), React.createElement(\"div\", {\n        className: \"p-16 pb-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"font-bold\",\n        placeholder: \"Title\",\n        type: \"text\",\n        name: \"note.title\",\n        value: note.title,\n        onChange: this.handleChange,\n        disableUnderline: true,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"p-16 pb-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Input, {\n        placeholder: \"Take a note...\",\n        multiline: true,\n        rows: \"4\",\n        name: \"note.description\",\n        value: note.description,\n        onChange: this.handleChange,\n        disableUnderline: true,\n        fullWidth: true,\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), (note.checklist.length > 0 || showList) && React.createElement(\"div\", {\n        className: \"px-16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(NoteFormList, {\n        checklist: note.checklist,\n        onCheckListChange: this.handleChecklistChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), (note.labels || note.reminder || note.time) && React.createElement(\"div\", {\n        className: \"flex flex-wrap w-full p-16 pb-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, note.reminder && React.createElement(NoteReminderLabel, {\n        className: \"mt-4 mr-4\",\n        date: note.reminder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), note.labels && note.labels.map(function (id) {\n        return React.createElement(NoteLabel, {\n          id: id,\n          key: id,\n          className: \"mt-4 mr-4\",\n          onDelete: function onDelete() {\n            return _this2.handleRemoveLabel(id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        });\n      }), note.time && React.createElement(Typography, {\n        color: \"textSecondary\",\n        className: \"text-12 ml-auto mt-8 mr-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Edited: \", moment(note.time).format('MMM DD YY, h:mm A'))))), React.createElement(\"div\", {\n        className: \"flex flex-auto justify-between items-center h-48\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex items-center px-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Remind me\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(NoteFormReminder, {\n        reminder: note.reminder,\n        onChange: this.handleDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        title: \"Add image\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(NoteFormUploadImage, {\n        onChange: this.handleUploadChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        title: \"Add checklist\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: \"w-32 h-32 mx-4 p-0\",\n        onClick: this.handleToggleList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"playlist_add_check\"))), React.createElement(Tooltip, {\n        title: \"Change labels\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(NoteFormLabelMenu, {\n        note: note,\n        onChange: this.handleLabelsChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        title: note.archive ? \"Unarchive\" : \"Archive\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: \"w-32 h-32 mx-4 p-0\",\n        onClick: this.handleArchiveToggle,\n        disabled: this.newFormButtonDisabled(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, note.archive ? \"unarchive\" : \"archive\"))))), React.createElement(\"div\", {\n        className: \"flex items-center px-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, variant === \"new\" ? React.createElement(Button, {\n        className: \"m-4\",\n        onClick: this.handleOnCreate,\n        variant: \"outlined\",\n        size: \"small\",\n        disabled: this.newFormButtonDisabled(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Create\") : React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Delete Note\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: \"w-32 h-32 mx-4 p-0\",\n        onClick: this.props.onRemove,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"delete\"))), React.createElement(Button, {\n        className: \"m-4\",\n        onClick: this.props.onClose,\n        variant: \"outlined\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Close\")))));\n    }\n  }]);\n\n  return NoteForm;\n}(Component);\n\nNoteForm.propTypes = propTypes;\nNoteForm.defaultProps = defaultProps;\nexport default withRouter(NoteForm);","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/notes/note-form/NoteForm.js"],"names":["React","Component","Fragment","Tooltip","Button","Icon","Input","Typography","IconButton","Fab","FuseScrollbars","moment","_","withRouter","NoteReminderLabel","NoteLabel","NoteModel","NoteFormList","NoteFormReminder","NoteFormUploadImage","NoteFormLabelMenu","propTypes","defaultProps","variant","note","NoteForm","state","merge","props","match","params","labelId","labels","id","archive","showList","handleChange","event","setState","setIn","target","name","type","checked","value","handleOnCreate","onCreate","handleToggleList","handleDateChange","date","handleChecklistChange","checklist","handleRemoveLabel","filter","_id","handleLabelsChange","handleRemoveImage","e","handleArchiveToggle","setTimeout","handleUploadChange","file","files","reader","FileReader","readAsBinaryString","onload","btoa","result","onerror","console","log","prevProps","prevState","snapshot","isEqual","onChange","title","image","description","length","reminder","time","map","format","newFormButtonDisabled","onRemove","onClose"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Tooltip, Button, Icon, Input, Typography, IconButton, Fab} from '@material-ui/core';\nimport {FuseScrollbars} from '@fuse';\nimport moment from 'moment';\nimport _ from '@lodash';\nimport {withRouter} from 'react-router-dom';\nimport NoteReminderLabel from 'app/main/apps/notes/NoteReminderLabel';\nimport NoteLabel from 'app/main/apps/notes/NoteLabel';\nimport NoteModel from 'app/main/apps/notes/model/NoteModel';\nimport NoteFormList from './checklist/NoteFormList';\nimport NoteFormReminder from './NoteFormReminder';\nimport NoteFormUploadImage from './NoteFormUploadImage';\nimport NoteFormLabelMenu from './NoteFormLabelMenu';\n\nconst propTypes = {};\n\nconst defaultProps = {\n    variant: \"edit\",\n    note   : null\n};\n\nclass NoteForm extends Component {\n\n    state = {\n        note    : _.merge(\n            {},\n            new NoteModel(),\n            this.props.note,\n            this.props.match.params.labelId ? {labels: [this.props.match.params.labelId]} : null,\n            this.props.match.params.id === \"archive\" ? {archive: true} : null\n        ),\n        showList: false\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot)\n    {\n        if ( prevState.note &&\n            this.state.note &&\n            !_.isEqual(prevState.note, this.state.note) &&\n            this.props.onChange\n        )\n        {\n            this.props.onChange(this.state.note);\n        }\n    }\n\n    handleChange = (event) => {\n        this.setState(_.setIn(this.state, event.target.name, event.target.type === 'checkbox' ? event.target.checked : event.target.value));\n    };\n\n    handleOnCreate = (event) => {\n        if ( !this.props.onCreate )\n        {\n            return;\n        }\n        this.props.onCreate(this.state.note);\n    };\n\n    handleToggleList = () => {\n        this.setState({showList: !this.state.showList});\n    };\n\n    handleDateChange = date => {\n        this.setState(_.setIn(this.state, \"note.reminder\", date));\n    };\n\n    handleChecklistChange = checklist => {\n        this.setState(_.setIn(this.state, `note.checklist`, checklist));\n    };\n\n    handleRemoveLabel = id => {\n        this.setState(_.setIn(this.state, `note.labels`, this.state.note.labels.filter(_id => _id !== id)));\n    };\n\n    handleLabelsChange = labels => {\n        this.setState(_.setIn(this.state, `note.labels`, labels));\n    };\n\n    handleRemoveImage = e => {\n        this.setState(_.setIn(this.state, `note.image`, \"\"));\n    };\n\n    handleArchiveToggle = e => {\n        this.setState(_.setIn(this.state, `note.archive`, !this.state.archive));\n        if ( this.props.variant === \"new\" )\n        {\n            setTimeout(() => this.handleOnCreate());\n        }\n    };\n\n    handleUploadChange = e => {\n        const file = e.target.files[0];\n        const reader = new FileReader();\n\n        reader.readAsBinaryString(file);\n\n        reader.onload = () => {\n            this.setState(_.setIn(this.state, `note.image`, `data:${file.type};base64,${btoa(reader.result)}`));\n        };\n\n        reader.onerror = function () {\n            console.log(\"error on load image\");\n        };\n    };\n\n    newFormButtonDisabled()\n    {\n        const note = this.state.note;\n        return note.title === \"\" && note.image === \"\" && note.description === \"\" && note.checklist.length === 0;\n    }\n\n    render()\n    {\n        const {note, showList} = this.state;\n        const {variant} = this.props;\n\n        if ( !note )\n        {\n            return null;\n        }\n\n        return (\n            <div className=\"flex flex-col w-full\">\n                <FuseScrollbars className=\"flex flex-auto w-full max-h-640\">\n                    <div className=\"w-full\">\n                        {note.image && note.image !== \"\" && (\n                            <div className=\"relative\">\n                                <img src={note.image} className=\"w-full block\" alt=\"note\"/>\n                                <Fab\n                                    className=\"absolute pin-r pin-b m-8\"\n                                    variant=\"extended\"\n                                    size=\"small\"\n                                    color=\"secondary\"\n                                    aria-label=\"Delete Image\"\n                                    onClick={this.handleRemoveImage}\n                                >\n                                    <Icon fontSize=\"small\">delete</Icon>\n                                </Fab>\n                            </div>\n                        )}\n                        <div className=\"p-16 pb-12\">\n                            <Input\n                                className=\"font-bold\"\n                                placeholder=\"Title\"\n                                type=\"text\"\n                                name=\"note.title\"\n                                value={note.title}\n                                onChange={this.handleChange}\n                                disableUnderline\n                                fullWidth\n                            />\n                        </div>\n                        <div className=\"p-16 pb-12\">\n                            <Input\n                                placeholder=\"Take a note...\"\n                                multiline\n                                rows=\"4\"\n                                name=\"note.description\"\n                                value={note.description}\n                                onChange={this.handleChange}\n                                disableUnderline\n                                fullWidth\n                                autoFocus\n                            />\n                        </div>\n\n                        {(note.checklist.length > 0 || showList) && (\n                            <div className=\"px-16\">\n                                <NoteFormList checklist={note.checklist} onCheckListChange={this.handleChecklistChange}/>\n                            </div>\n                        )}\n\n                        {(note.labels || note.reminder || note.time) && (\n                            <div className=\"flex flex-wrap w-full p-16 pb-12\">\n                                {note.reminder && (\n                                    <NoteReminderLabel className=\"mt-4 mr-4\" date={note.reminder}/>\n                                )}\n                                {note.labels && note.labels.map(id => (\n                                    <NoteLabel id={id} key={id} className=\"mt-4 mr-4\" onDelete={() => this.handleRemoveLabel(id)}/>\n                                ))}\n                                {note.time && (\n                                    <Typography color=\"textSecondary\" className=\"text-12 ml-auto mt-8 mr-4\">\n                                        Edited: {moment(note.time).format('MMM DD YY, h:mm A')}\n                                    </Typography>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                </FuseScrollbars>\n\n                <div className=\"flex flex-auto justify-between items-center h-48\">\n                    <div className=\"flex items-center px-4\">\n\n                        <Tooltip title=\"Remind me\" placement=\"bottom\">\n                            <div>\n                                <NoteFormReminder reminder={note.reminder} onChange={this.handleDateChange}/>\n                            </div>\n                        </Tooltip>\n\n                        <Tooltip title=\"Add image\" placement=\"bottom\">\n                            <div>\n                                <NoteFormUploadImage onChange={this.handleUploadChange}/>\n                            </div>\n                        </Tooltip>\n\n                        <Tooltip title=\"Add checklist\" placement=\"bottom\">\n                            <IconButton className=\"w-32 h-32 mx-4 p-0\" onClick={this.handleToggleList}>\n                                <Icon fontSize=\"small\">playlist_add_check</Icon>\n                            </IconButton>\n                        </Tooltip>\n\n                        <Tooltip title=\"Change labels\" placement=\"bottom\">\n                            <div>\n                                <NoteFormLabelMenu note={note} onChange={this.handleLabelsChange}/>\n                            </div>\n                        </Tooltip>\n\n                        <Tooltip title={note.archive ? \"Unarchive\" : \"Archive\"} placement=\"bottom\">\n                            <div>\n                                <IconButton className=\"w-32 h-32 mx-4 p-0\" onClick={this.handleArchiveToggle} disabled={this.newFormButtonDisabled()}>\n                                    <Icon fontSize=\"small\">\n                                        {note.archive ? \"unarchive\" : \"archive\"}\n                                    </Icon>\n                                </IconButton>\n                            </div>\n                        </Tooltip>\n                    </div>\n                    <div className=\"flex items-center px-4\">\n                        {variant === \"new\" ? (\n                            <Button\n                                className=\"m-4\"\n                                onClick={this.handleOnCreate}\n                                variant=\"outlined\"\n                                size=\"small\"\n                                disabled={this.newFormButtonDisabled()}\n                            >\n                                Create\n                            </Button>\n                        ) : (\n                            <Fragment>\n                                <Tooltip title=\"Delete Note\" placement=\"bottom\">\n                                    <IconButton className=\"w-32 h-32 mx-4 p-0\" onClick={this.props.onRemove}>\n                                        <Icon fontSize=\"small\">delete</Icon>\n                                    </IconButton>\n                                </Tooltip>\n                                <Button\n                                    className=\"m-4\"\n                                    onClick={this.props.onClose}\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                >\n                                    Close\n                                </Button>\n                            </Fragment>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nNoteForm.propTypes = propTypes;\nNoteForm.defaultProps = defaultProps;\n\nexport default withRouter(NoteForm);\n"]},"metadata":{},"sourceType":"module"}