{"ast":null,"code":"import _toConsumableArray from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport * as Actions from '../actions';\nimport _ from '@lodash';\n\nvar userReducer = function userReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case Actions.GET_USER_DATA:\n      {\n        return _objectSpread({}, action.payload);\n      }\n\n    case Actions.GET_CHAT:\n      {\n        return getUpdatedUser(state, action);\n      }\n\n    case Actions.SEND_MESSAGE:\n      {\n        return getUpdatedUser(state, action);\n      }\n\n    default:\n      return state;\n  }\n};\n\nfunction getUpdatedUser(state, action) {\n  var newUserData = _.merge({}, state);\n\n  var userChatData = newUserData.chatList.find(function (_chat) {\n    return _chat.contactId === action.userChatData.contactId;\n  });\n\n  if (userChatData) {\n    newUserData.chatList = newUserData.chatList.map(function (_chat) {\n      return _chat.contactId === action.userChatData.contactId ? action.userChatData : _chat;\n    });\n  } else {\n    newUserData.chatList = [action.userChatData].concat(_toConsumableArray(newUserData.chatList));\n  }\n\n  return newUserData;\n}\n\nexport default userReducer;","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/fuse-layouts/shared-components/chatPanel/store/reducers/user.reducer.js"],"names":["Actions","_","userReducer","state","action","type","GET_USER_DATA","payload","GET_CHAT","getUpdatedUser","SEND_MESSAGE","newUserData","merge","userChatData","chatList","find","_chat","contactId","map"],"mappings":";;AAAA,OAAO,KAAKA,OAAZ,MAAyB,YAAzB;AACA,OAAOC,CAAP,MAAc,SAAd;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAA8B;AAAA,MAApBC,KAAoB,uEAAZ,EAAY;AAAA,MAARC,MAAQ;;AAC9C,UAASA,MAAM,CAACC,IAAhB;AAEI,SAAKL,OAAO,CAACM,aAAb;AACA;AACI,iCAAWF,MAAM,CAACG,OAAlB;AACH;;AACD,SAAKP,OAAO,CAACQ,QAAb;AACA;AACI,eAAOC,cAAc,CAACN,KAAD,EAAQC,MAAR,CAArB;AACH;;AACD,SAAKJ,OAAO,CAACU,YAAb;AACA;AACI,eAAOD,cAAc,CAACN,KAAD,EAAQC,MAAR,CAArB;AACH;;AACD;AACI,aAAOD,KAAP;AAfR;AAiBH,CAlBD;;AAoBA,SAASM,cAAT,CAAwBN,KAAxB,EAA+BC,MAA/B,EACA;AACI,MAAIO,WAAW,GAAGV,CAAC,CAACW,KAAF,CAAQ,EAAR,EAAYT,KAAZ,CAAlB;;AACA,MAAIU,YAAY,GAAGF,WAAW,CAACG,QAAZ,CAAqBC,IAArB,CAA0B,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAACC,SAAN,KAAoBb,MAAM,CAACS,YAAP,CAAoBI,SAA5C;AAAA,GAA/B,CAAnB;;AACA,MAAKJ,YAAL,EACA;AACIF,IAAAA,WAAW,CAACG,QAAZ,GAAuBH,WAAW,CAACG,QAAZ,CAAqBI,GAArB,CAAyB,UAAAF,KAAK;AAAA,aAAIA,KAAK,CAACC,SAAN,KAAoBb,MAAM,CAACS,YAAP,CAAoBI,SAAxC,GAAoDb,MAAM,CAACS,YAA3D,GAA0EG,KAA9E;AAAA,KAA9B,CAAvB;AACH,GAHD,MAKA;AACIL,IAAAA,WAAW,CAACG,QAAZ,IAAwBV,MAAM,CAACS,YAA/B,4BAAgDF,WAAW,CAACG,QAA5D;AACH;;AACD,SAAOH,WAAP;AACH;;AAED,eAAeT,WAAf","sourcesContent":["import * as Actions from '../actions';\nimport _ from '@lodash';\n\nconst userReducer = function (state = {}, action) {\n    switch ( action.type )\n    {\n        case Actions.GET_USER_DATA:\n        {\n            return {...action.payload};\n        }\n        case Actions.GET_CHAT:\n        {\n            return getUpdatedUser(state, action);\n        }\n        case Actions.SEND_MESSAGE:\n        {\n            return getUpdatedUser(state, action);\n        }\n        default:\n            return state;\n    }\n};\n\nfunction getUpdatedUser(state, action)\n{\n    let newUserData = _.merge({}, state);\n    let userChatData = newUserData.chatList.find(_chat => _chat.contactId === action.userChatData.contactId);\n    if ( userChatData )\n    {\n        newUserData.chatList = newUserData.chatList.map(_chat => _chat.contactId === action.userChatData.contactId ? action.userChatData : _chat);\n    }\n    else\n    {\n        newUserData.chatList = [action.userChatData, ...newUserData.chatList];\n    }\n    return newUserData;\n}\n\nexport default userReducer;\n"]},"metadata":{},"sourceType":"module"}