{"ast":null,"code":"import _classCallCheck from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/e-commerce/products/ProductsTable.js\";\nimport React, { Component } from 'react';\nimport { Icon, Table, TableBody, TableCell, TablePagination, TableRow, Checkbox } from '@material-ui/core';\nimport { FuseScrollbars } from '@fuse';\nimport { withRouter } from 'react-router-dom';\nimport { bindActionCreators } from 'redux';\nimport connect from 'react-redux/es/connect/connect';\nimport classNames from 'classnames';\nimport _ from '@lodash';\nimport ProductsTableHead from './ProductsTableHead';\nimport * as Actions from '../store/actions';\n\nvar ProductsTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductsTable, _Component);\n\n  function ProductsTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductsTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductsTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      order: 'asc',\n      orderBy: null,\n      selected: [],\n      data: _this.props.products,\n      page: 0,\n      rowsPerPage: 10\n    };\n\n    _this.getFilteredArray = function (data, searchText) {\n      if (searchText.length === 0) {\n        return data;\n      }\n\n      return _.filter(data, function (item) {\n        return item.name.toLowerCase().includes(searchText.toLowerCase());\n      });\n    };\n\n    _this.handleRequestSort = function (event, property) {\n      var orderBy = property;\n      var order = 'desc';\n\n      if (_this.state.orderBy === property && _this.state.order === 'desc') {\n        order = 'asc';\n      }\n\n      _this.setState({\n        order: order,\n        orderBy: orderBy\n      });\n    };\n\n    _this.handleSelectAllClick = function (event) {\n      if (event.target.checked) {\n        _this.setState(function (state) {\n          return {\n            selected: _this.state.data.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n\n        return;\n      }\n\n      _this.setState({\n        selected: []\n      });\n    };\n\n    _this.handleClick = function (item) {\n      _this.props.history.push('/apps/e-commerce/products/' + item.id + '/' + item.handle);\n    };\n\n    _this.handleCheck = function (event, id) {\n      var selected = _this.state.selected;\n      var selectedIndex = selected.indexOf(id);\n      var newSelected = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, id);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n      }\n\n      _this.setState({\n        selected: newSelected\n      });\n    };\n\n    _this.handleChangePage = function (event, page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.handleChangeRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.isSelected = function (id) {\n      return _this.state.selected.indexOf(id) !== -1;\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductsTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getProducts();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!_.isEqual(this.props.products, prevProps.products) || !_.isEqual(this.props.searchText, prevProps.searchText)) {\n        var data = this.getFilteredArray(this.props.products, this.props.searchText);\n        this.setState({\n          data: data\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          order = _this$state.order,\n          orderBy = _this$state.orderBy,\n          selected = _this$state.selected,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page,\n          data = _this$state.data;\n      return React.createElement(\"div\", {\n        className: \"w-full flex flex-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(FuseScrollbars, {\n        className: \"flex-grow overflow-x-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"min-w-xl\",\n        \"aria-labelledby\": \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(ProductsTableHead, {\n        numSelected: selected.length,\n        order: order,\n        orderBy: orderBy,\n        onSelectAllClick: this.handleSelectAllClick,\n        onRequestSort: this.handleRequestSort,\n        rowCount: data.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, _.orderBy(data, [function (o) {\n        switch (orderBy) {\n          case 'categories':\n            {\n              return o.categories[0];\n            }\n\n          default:\n            {\n              return o[orderBy];\n            }\n        }\n      }], [order]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (n) {\n        var isSelected = _this2.isSelected(n.id);\n\n        return React.createElement(TableRow, {\n          className: \"h-64 cursor-pointer\",\n          hover: true,\n          role: \"checkbox\",\n          \"aria-checked\": isSelected,\n          tabIndex: -1,\n          key: n.id,\n          selected: isSelected,\n          onClick: function onClick(event) {\n            return _this2.handleClick(n);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          className: \"w-48 pl-4 sm:pl-12\",\n          padding: \"checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(Checkbox, {\n          checked: isSelected,\n          onClick: function onClick(event) {\n            return event.stopPropagation();\n          },\n          onChange: function onChange(event) {\n            return _this2.handleCheck(event, n.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          className: \"w-52\",\n          component: \"th\",\n          scope: \"row\",\n          padding: \"none\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, n.images.length > 0 ? React.createElement(\"img\", {\n          className: \"w-full block rounded\",\n          src: _.find(n.images, {\n            id: n.featuredImageId\n          }).url,\n          alt: n.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }) : React.createElement(\"img\", {\n          className: \"w-full block rounded\",\n          src: \"assets/images/ecommerce/product-image-placeholder.png\",\n          alt: n.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, n.name), React.createElement(TableCell, {\n          className: \"truncate\",\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, n.categories.join(', ')), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \"$\"), n.priceTaxIncl), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, n.quantity, React.createElement(\"i\", {\n          className: classNames(\"inline-block w-8 h-8 rounded ml-8\", n.quantity <= 5 && \"bg-red\", n.quantity > 5 && n.quantity <= 25 && \"bg-orange\", n.quantity > 25 && \"bg-green\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, n.active ? React.createElement(Icon, {\n          className: \"text-green text-20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, \"check_circle\") : React.createElement(Icon, {\n          className: \"text-red text-20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, \"remove_circle\")));\n      })))), React.createElement(TablePagination, {\n        component: \"div\",\n        count: data.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        backIconButtonProps: {\n          'aria-label': 'Previous Page'\n        },\n        nextIconButtonProps: {\n          'aria-label': 'Next Page'\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.handleChangeRowsPerPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ProductsTable;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getProducts: Actions.getProducts\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var eCommerceApp = _ref.eCommerceApp;\n  return {\n    products: eCommerceApp.products.data,\n    searchText: eCommerceApp.products.searchText\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ProductsTable));","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/e-commerce/products/ProductsTable.js"],"names":["React","Component","Icon","Table","TableBody","TableCell","TablePagination","TableRow","Checkbox","FuseScrollbars","withRouter","bindActionCreators","connect","classNames","_","ProductsTableHead","Actions","ProductsTable","state","order","orderBy","selected","data","props","products","page","rowsPerPage","getFilteredArray","searchText","length","filter","item","name","toLowerCase","includes","handleRequestSort","event","property","setState","handleSelectAllClick","target","checked","map","n","id","handleClick","history","push","handle","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","handleChangeRowsPerPage","value","isSelected","getProducts","prevProps","prevState","isEqual","o","categories","stopPropagation","images","find","featuredImageId","url","join","priceTaxIncl","quantity","active","mapDispatchToProps","dispatch","mapStateToProps","eCommerceApp"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Icon, Table, TableBody, TableCell, TablePagination, TableRow, Checkbox} from '@material-ui/core';\nimport {FuseScrollbars} from '@fuse';\nimport {withRouter} from 'react-router-dom';\nimport {bindActionCreators} from 'redux';\nimport connect from 'react-redux/es/connect/connect';\nimport classNames from 'classnames';\nimport _ from '@lodash';\nimport ProductsTableHead from './ProductsTableHead';\nimport * as Actions from '../store/actions';\n\nclass ProductsTable extends Component {\n\n    state = {\n        order      : 'asc',\n        orderBy    : null,\n        selected   : [],\n        data       : this.props.products,\n        page       : 0,\n        rowsPerPage: 10\n    };\n\n    componentDidMount()\n    {\n        this.props.getProducts();\n    }\n\n    componentDidUpdate(prevProps, prevState)\n    {\n        if ( !_.isEqual(this.props.products, prevProps.products) || !_.isEqual(this.props.searchText, prevProps.searchText) )\n        {\n            const data = this.getFilteredArray(this.props.products, this.props.searchText);\n            this.setState({data})\n        }\n    }\n\n    getFilteredArray = (data, searchText) => {\n        if ( searchText.length === 0 )\n        {\n            return data;\n        }\n        return _.filter(data, item => item.name.toLowerCase().includes(searchText.toLowerCase()));\n    };\n\n    handleRequestSort = (event, property) => {\n        const orderBy = property;\n        let order = 'desc';\n\n        if ( this.state.orderBy === property && this.state.order === 'desc' )\n        {\n            order = 'asc';\n        }\n\n        this.setState({\n            order,\n            orderBy\n        });\n    };\n\n    handleSelectAllClick = event => {\n        if ( event.target.checked )\n        {\n            this.setState(state => ({selected: this.state.data.map(n => n.id)}));\n            return;\n        }\n        this.setState({selected: []});\n    };\n\n    handleClick = (item) => {\n        this.props.history.push('/apps/e-commerce/products/' + item.id + '/' + item.handle);\n    };\n\n    handleCheck = (event, id) => {\n        const {selected} = this.state;\n        const selectedIndex = selected.indexOf(id);\n        let newSelected = [];\n\n        if ( selectedIndex === -1 )\n        {\n            newSelected = newSelected.concat(selected, id);\n        }\n        else if ( selectedIndex === 0 )\n        {\n            newSelected = newSelected.concat(selected.slice(1));\n        }\n        else if ( selectedIndex === selected.length - 1 )\n        {\n            newSelected = newSelected.concat(selected.slice(0, -1));\n        }\n        else if ( selectedIndex > 0 )\n        {\n            newSelected = newSelected.concat(\n                selected.slice(0, selectedIndex),\n                selected.slice(selectedIndex + 1)\n            );\n        }\n\n        this.setState({selected: newSelected});\n    };\n\n    handleChangePage = (event, page) => {\n        this.setState({page});\n    };\n\n    handleChangeRowsPerPage = event => {\n        this.setState({rowsPerPage: event.target.value});\n    };\n\n    isSelected = id => this.state.selected.indexOf(id) !== -1;\n\n    render()\n    {\n        const {order, orderBy, selected, rowsPerPage, page, data} = this.state;\n\n        return (\n            <div className=\"w-full flex flex-col\">\n\n                <FuseScrollbars className=\"flex-grow overflow-x-auto\">\n\n                    <Table className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\n\n                        <ProductsTableHead\n                            numSelected={selected.length}\n                            order={order}\n                            orderBy={orderBy}\n                            onSelectAllClick={this.handleSelectAllClick}\n                            onRequestSort={this.handleRequestSort}\n                            rowCount={data.length}\n                        />\n\n                        <TableBody>\n                            {_.orderBy(data, [\n                                (o) => {\n                                    switch ( orderBy )\n                                    {\n                                        case 'categories':\n                                        {\n                                            return o.categories[0];\n                                        }\n                                        default:\n                                        {\n                                            return o[orderBy];\n                                        }\n                                    }\n                                }\n                            ], [order])\n                                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                                .map(n => {\n                                    const isSelected = this.isSelected(n.id);\n                                    return (\n                                        <TableRow\n                                            className=\"h-64 cursor-pointer\"\n                                            hover\n                                            role=\"checkbox\"\n                                            aria-checked={isSelected}\n                                            tabIndex={-1}\n                                            key={n.id}\n                                            selected={isSelected}\n                                            onClick={event => this.handleClick(n)}\n                                        >\n                                            <TableCell className=\"w-48 pl-4 sm:pl-12\" padding=\"checkbox\">\n                                                <Checkbox\n                                                    checked={isSelected}\n                                                    onClick={event => event.stopPropagation()}\n                                                    onChange={event => this.handleCheck(event, n.id)}\n                                                />\n                                            </TableCell>\n\n                                            <TableCell className=\"w-52\" component=\"th\" scope=\"row\" padding=\"none\">\n                                                {n.images.length > 0 ? (\n                                                    <img className=\"w-full block rounded\" src={_.find(n.images, {id: n.featuredImageId}).url} alt={n.name}/>\n                                                ) : (\n                                                    <img className=\"w-full block rounded\" src=\"assets/images/ecommerce/product-image-placeholder.png\" alt={n.name}/>\n                                                )}\n                                            </TableCell>\n\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                {n.name}\n                                            </TableCell>\n\n                                            <TableCell className=\"truncate\" component=\"th\" scope=\"row\">\n                                                {n.categories.join(', ')}\n                                            </TableCell>\n\n                                            <TableCell component=\"th\" scope=\"row\" align=\"right\">\n                                                <span>$</span>\n                                                {n.priceTaxIncl}\n                                            </TableCell>\n\n                                            <TableCell component=\"th\" scope=\"row\" align=\"right\">\n                                                {n.quantity}\n                                                <i className={classNames(\"inline-block w-8 h-8 rounded ml-8\", n.quantity <= 5 && \"bg-red\", n.quantity > 5 && n.quantity <= 25 && \"bg-orange\", n.quantity > 25 && \"bg-green\")}/>\n                                            </TableCell>\n\n                                            <TableCell component=\"th\" scope=\"row\" align=\"right\">\n                                                {n.active ?\n                                                    (\n                                                        <Icon className=\"text-green text-20\">check_circle</Icon>\n                                                    ) :\n                                                    (\n                                                        <Icon className=\"text-red text-20\">remove_circle</Icon>\n                                                    )\n                                                }\n                                            </TableCell>\n                                        </TableRow>\n                                    );\n                                })}\n                        </TableBody>\n                    </Table>\n                </FuseScrollbars>\n\n                <TablePagination\n                    component=\"div\"\n                    count={data.length}\n                    rowsPerPage={rowsPerPage}\n                    page={page}\n                    backIconButtonProps={{\n                        'aria-label': 'Previous Page'\n                    }}\n                    nextIconButtonProps={{\n                        'aria-label': 'Next Page'\n                    }}\n                    onChangePage={this.handleChangePage}\n                    onChangeRowsPerPage={this.handleChangeRowsPerPage}\n                />\n            </div>\n        );\n    }\n}\n\nfunction mapDispatchToProps(dispatch)\n{\n    return bindActionCreators({\n        getProducts: Actions.getProducts\n    }, dispatch);\n}\n\nfunction mapStateToProps({eCommerceApp})\n{\n    return {\n        products  : eCommerceApp.products.data,\n        searchText: eCommerceApp.products.searchText\n    }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ProductsTable));\n"]},"metadata":{},"sourceType":"module"}