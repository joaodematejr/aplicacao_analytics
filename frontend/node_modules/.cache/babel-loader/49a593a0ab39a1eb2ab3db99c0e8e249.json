{"ast":null,"code":"import _classCallCheck from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/e-commerce/orders/OrdersTable.js\";\nimport React, { Component } from 'react';\nimport { Table, TableBody, TableCell, TablePagination, TableRow, Checkbox } from '@material-ui/core';\nimport { FuseScrollbars, FuseUtils } from '@fuse';\nimport { withRouter } from 'react-router-dom';\nimport { bindActionCreators } from 'redux';\nimport connect from 'react-redux/es/connect/connect';\nimport _ from '@lodash';\nimport OrdersTableHead from './OrdersTableHead';\nimport OrdersStatus from '../order/OrdersStatus';\nimport * as Actions from '../store/actions';\n\nvar OrdersTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrdersTable, _Component);\n\n  function OrdersTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, OrdersTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(OrdersTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      order: 'asc',\n      orderBy: 'id',\n      selected: [],\n      data: _this.props.orders,\n      page: 0,\n      rowsPerPage: 10\n    };\n\n    _this.getFilteredArray = function (data, searchText) {\n      if (searchText.length === 0) {\n        return data;\n      }\n\n      return FuseUtils.filterArrayByString(data, searchText);\n    };\n\n    _this.handleRequestSort = function (event, property) {\n      var orderBy = property;\n      var order = 'desc';\n\n      if (_this.state.orderBy === property && _this.state.order === 'desc') {\n        order = 'asc';\n      }\n\n      _this.setState({\n        order: order,\n        orderBy: orderBy\n      });\n    };\n\n    _this.handleSelectAllClick = function (event) {\n      if (event.target.checked) {\n        _this.setState(function (state) {\n          return {\n            selected: _this.state.data.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n\n        return;\n      }\n\n      _this.setState({\n        selected: []\n      });\n    };\n\n    _this.handleClick = function (item) {\n      _this.props.history.push('/apps/e-commerce/orders/' + item.id);\n    };\n\n    _this.handleCheck = function (event, id) {\n      var selected = _this.state.selected;\n      var selectedIndex = selected.indexOf(id);\n      var newSelected = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, id);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n      }\n\n      _this.setState({\n        selected: newSelected\n      });\n    };\n\n    _this.handleChangePage = function (event, page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.handleChangeRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.isSelected = function (id) {\n      return _this.state.selected.indexOf(id) !== -1;\n    };\n\n    return _this;\n  }\n\n  _createClass(OrdersTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getOrders();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!_.isEqual(this.props.orders, prevProps.orders) || !_.isEqual(this.props.searchText, prevProps.searchText)) {\n        var data = this.getFilteredArray(this.props.orders, this.props.searchText);\n        this.setState({\n          data: data\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          order = _this$state.order,\n          orderBy = _this$state.orderBy,\n          selected = _this$state.selected,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page,\n          data = _this$state.data;\n      return React.createElement(\"div\", {\n        className: \"w-full flex flex-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(FuseScrollbars, {\n        className: \"flex-grow overflow-x-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"min-w-xl\",\n        \"aria-labelledby\": \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(OrdersTableHead, {\n        numSelected: selected.length,\n        order: order,\n        orderBy: orderBy,\n        onSelectAllClick: this.handleSelectAllClick,\n        onRequestSort: this.handleRequestSort,\n        rowCount: data.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, _.orderBy(data, [function (o) {\n        switch (orderBy) {\n          case 'id':\n            {\n              return parseInt(o.id, 10);\n            }\n\n          case 'customer':\n            {\n              return o.customer.firstName;\n            }\n\n          case 'payment':\n            {\n              return o.payment.method;\n            }\n\n          case 'status':\n            {\n              return o.status[0].name;\n            }\n\n          default:\n            {\n              return o[orderBy];\n            }\n        }\n      }], [order]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (n) {\n        var isSelected = _this2.isSelected(n.id);\n\n        return React.createElement(TableRow, {\n          className: \"h-64 cursor-pointer\",\n          hover: true,\n          role: \"checkbox\",\n          \"aria-checked\": isSelected,\n          tabIndex: -1,\n          key: n.id,\n          selected: isSelected,\n          onClick: function onClick(event) {\n            return _this2.handleClick(n);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          className: \"w-48 pl-4 sm:pl-12\",\n          padding: \"checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, React.createElement(Checkbox, {\n          checked: isSelected,\n          onClick: function onClick(event) {\n            return event.stopPropagation();\n          },\n          onChange: function onChange(event) {\n            return _this2.handleCheck(event, n.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, n.id), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, n.reference), React.createElement(TableCell, {\n          className: \"truncate\",\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, n.customer.firstName + ' ' + n.customer.lastName), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, \"$\"), n.total), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, n.payment.method), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(OrdersStatus, {\n          name: n.status[0].name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        })), React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, n.date));\n      })))), React.createElement(TablePagination, {\n        component: \"div\",\n        count: data.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        backIconButtonProps: {\n          'aria-label': 'Previous Page'\n        },\n        nextIconButtonProps: {\n          'aria-label': 'Next Page'\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.handleChangeRowsPerPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return OrdersTable;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getOrders: Actions.getOrders\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var eCommerceApp = _ref.eCommerceApp;\n  return {\n    orders: eCommerceApp.orders.data,\n    searchText: eCommerceApp.orders.searchText\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(OrdersTable));","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/e-commerce/orders/OrdersTable.js"],"names":["React","Component","Table","TableBody","TableCell","TablePagination","TableRow","Checkbox","FuseScrollbars","FuseUtils","withRouter","bindActionCreators","connect","_","OrdersTableHead","OrdersStatus","Actions","OrdersTable","state","order","orderBy","selected","data","props","orders","page","rowsPerPage","getFilteredArray","searchText","length","filterArrayByString","handleRequestSort","event","property","setState","handleSelectAllClick","target","checked","map","n","id","handleClick","item","history","push","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","handleChangeRowsPerPage","value","isSelected","getOrders","prevProps","prevState","isEqual","o","parseInt","customer","firstName","payment","method","status","name","stopPropagation","reference","lastName","total","date","mapDispatchToProps","dispatch","mapStateToProps","eCommerceApp"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Table, TableBody, TableCell, TablePagination, TableRow, Checkbox} from '@material-ui/core';\nimport {FuseScrollbars, FuseUtils} from '@fuse';\nimport {withRouter} from 'react-router-dom';\nimport {bindActionCreators} from 'redux';\nimport connect from 'react-redux/es/connect/connect';\nimport _ from '@lodash';\nimport OrdersTableHead from './OrdersTableHead';\nimport OrdersStatus from '../order/OrdersStatus';\nimport * as Actions from '../store/actions';\n\nclass OrdersTable extends Component {\n\n    state = {\n        order      : 'asc',\n        orderBy    : 'id',\n        selected   : [],\n        data       : this.props.orders,\n        page       : 0,\n        rowsPerPage: 10\n    };\n\n    componentDidMount()\n    {\n        this.props.getOrders();\n    }\n\n    componentDidUpdate(prevProps, prevState)\n    {\n        if ( !_.isEqual(this.props.orders, prevProps.orders) || !_.isEqual(this.props.searchText, prevProps.searchText) )\n        {\n            const data = this.getFilteredArray(this.props.orders, this.props.searchText);\n            this.setState({data})\n        }\n    }\n\n    getFilteredArray = (data, searchText) => {\n        if ( searchText.length === 0 )\n        {\n            return data;\n        }\n        return FuseUtils.filterArrayByString(data, searchText);\n    };\n\n    handleRequestSort = (event, property) => {\n        const orderBy = property;\n        let order = 'desc';\n\n        if ( this.state.orderBy === property && this.state.order === 'desc' )\n        {\n            order = 'asc';\n        }\n\n        this.setState({\n            order,\n            orderBy\n        });\n    };\n\n    handleSelectAllClick = event => {\n        if ( event.target.checked )\n        {\n            this.setState(state => ({selected: this.state.data.map(n => n.id)}));\n            return;\n        }\n        this.setState({selected: []});\n    };\n\n    handleClick = (item) => {\n        this.props.history.push('/apps/e-commerce/orders/' + item.id);\n    };\n\n    handleCheck = (event, id) => {\n        const {selected} = this.state;\n        const selectedIndex = selected.indexOf(id);\n        let newSelected = [];\n\n        if ( selectedIndex === -1 )\n        {\n            newSelected = newSelected.concat(selected, id);\n        }\n        else if ( selectedIndex === 0 )\n        {\n            newSelected = newSelected.concat(selected.slice(1));\n        }\n        else if ( selectedIndex === selected.length - 1 )\n        {\n            newSelected = newSelected.concat(selected.slice(0, -1));\n        }\n        else if ( selectedIndex > 0 )\n        {\n            newSelected = newSelected.concat(\n                selected.slice(0, selectedIndex),\n                selected.slice(selectedIndex + 1)\n            );\n        }\n\n        this.setState({selected: newSelected});\n    };\n\n    handleChangePage = (event, page) => {\n        this.setState({page});\n    };\n\n    handleChangeRowsPerPage = event => {\n        this.setState({rowsPerPage: event.target.value});\n    };\n\n    isSelected = id => this.state.selected.indexOf(id) !== -1;\n\n    render()\n    {\n        const {order, orderBy, selected, rowsPerPage, page, data} = this.state;\n\n        return (\n            <div className=\"w-full flex flex-col\">\n\n                <FuseScrollbars className=\"flex-grow overflow-x-auto\">\n\n                    <Table className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\n\n                        <OrdersTableHead\n                            numSelected={selected.length}\n                            order={order}\n                            orderBy={orderBy}\n                            onSelectAllClick={this.handleSelectAllClick}\n                            onRequestSort={this.handleRequestSort}\n                            rowCount={data.length}\n                        />\n\n                        <TableBody>\n                            {\n                                _.orderBy(data, [\n                                    (o) => {\n                                        switch ( orderBy )\n                                        {\n                                            case 'id':\n                                            {\n                                                return parseInt(o.id, 10);\n                                            }\n                                            case 'customer':\n                                            {\n                                                return o.customer.firstName;\n                                            }\n                                            case 'payment':\n                                            {\n                                                return o.payment.method;\n                                            }\n                                            case 'status':\n                                            {\n                                                return o.status[0].name;\n                                            }\n                                            default:\n                                            {\n                                                return o[orderBy];\n                                            }\n                                        }\n                                    }\n                                ], [order])\n                                    .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                                    .map(n => {\n                                        const isSelected = this.isSelected(n.id);\n                                        return (\n                                            <TableRow\n                                                className=\"h-64 cursor-pointer\"\n                                                hover\n                                                role=\"checkbox\"\n                                                aria-checked={isSelected}\n                                                tabIndex={-1}\n                                                key={n.id}\n                                                selected={isSelected}\n                                                onClick={event => this.handleClick(n)}\n                                            >\n                                                <TableCell className=\"w-48 pl-4 sm:pl-12\" padding=\"checkbox\">\n                                                    <Checkbox\n                                                        checked={isSelected}\n                                                        onClick={event => event.stopPropagation()}\n                                                        onChange={event => this.handleCheck(event, n.id)}\n                                                    />\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\">\n                                                    {n.id}\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\">\n                                                    {n.reference}\n                                                </TableCell>\n\n                                                <TableCell className=\"truncate\" component=\"th\" scope=\"row\">\n                                                    {n.customer.firstName + ' ' + n.customer.lastName}\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\" align=\"right\">\n                                                    <span>$</span>\n                                                    {n.total}\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\">\n                                                    {n.payment.method}\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\">\n                                                    <OrdersStatus name={n.status[0].name}/>\n                                                </TableCell>\n\n                                                <TableCell component=\"th\" scope=\"row\">\n                                                    {n.date}\n                                                </TableCell>\n\n                                            </TableRow>\n                                        );\n                                    })}\n                        </TableBody>\n                    </Table>\n                </FuseScrollbars>\n\n                <TablePagination\n                    component=\"div\"\n                    count={data.length}\n                    rowsPerPage={rowsPerPage}\n                    page={page}\n                    backIconButtonProps={{\n                        'aria-label': 'Previous Page'\n                    }}\n                    nextIconButtonProps={{\n                        'aria-label': 'Next Page'\n                    }}\n                    onChangePage={this.handleChangePage}\n                    onChangeRowsPerPage={this.handleChangeRowsPerPage}\n                />\n            </div>\n        );\n    }\n}\n\nfunction mapDispatchToProps(dispatch)\n{\n    return bindActionCreators({\n        getOrders: Actions.getOrders\n    }, dispatch);\n}\n\nfunction mapStateToProps({eCommerceApp})\n{\n    return {\n        orders    : eCommerceApp.orders.data,\n        searchText: eCommerceApp.orders.searchText\n    }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(OrdersTable));\n"]},"metadata":{},"sourceType":"module"}