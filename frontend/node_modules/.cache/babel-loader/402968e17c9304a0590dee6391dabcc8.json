{"ast":null,"code":"import _toConsumableArray from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport * as Actions from '../actions';\nimport _ from \"lodash\";\n\nvar userReducer = function userReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case Actions.GET_USER_DATA:\n      {\n        return _objectSpread({}, action.payload);\n      }\n\n    case Actions.UPDATE_USER_DATA:\n      {\n        return _objectSpread({}, action.payload);\n      }\n\n    case Actions.GET_CHAT:\n      {\n        return getUpdatedUser(state, action);\n      }\n\n    case Actions.SEND_MESSAGE:\n      {\n        return getUpdatedUser(state, action);\n      }\n\n    default:\n      return state;\n  }\n};\n\nfunction getUpdatedUser(state, action) {\n  var newUserData = _.merge({}, state);\n\n  var userChatData = newUserData.chatList.find(function (_chat) {\n    return _chat.contactId === action.userChatData.contactId;\n  });\n\n  if (userChatData) {\n    newUserData.chatList = newUserData.chatList.map(function (_chat) {\n      return _chat.contactId === action.userChatData.contactId ? action.userChatData : _chat;\n    });\n  } else {\n    newUserData.chatList = [action.userChatData].concat(_toConsumableArray(newUserData.chatList));\n  }\n\n  return newUserData;\n}\n\nexport default userReducer;","map":{"version":3,"sources":["/Volumes/Documentos/facu/projetos/aplicacao_analytics/test/src/app/main/apps/chat/store/reducers/user.reducer.js"],"names":["Actions","_","userReducer","state","action","type","GET_USER_DATA","payload","UPDATE_USER_DATA","GET_CHAT","getUpdatedUser","SEND_MESSAGE","newUserData","merge","userChatData","chatList","find","_chat","contactId","map"],"mappings":";;AAAA,OAAO,KAAKA,OAAZ,MAAyB,YAAzB;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAgC;AAAA,MAAtBC,KAAsB,uEAAd,IAAc;AAAA,MAARC,MAAQ;;AAChD,UAASA,MAAM,CAACC,IAAhB;AAEI,SAAKL,OAAO,CAACM,aAAb;AACA;AACI,iCAAWF,MAAM,CAACG,OAAlB;AACH;;AACD,SAAKP,OAAO,CAACQ,gBAAb;AACA;AACI,iCAAWJ,MAAM,CAACG,OAAlB;AACH;;AACD,SAAKP,OAAO,CAACS,QAAb;AACA;AACI,eAAOC,cAAc,CAACP,KAAD,EAAQC,MAAR,CAArB;AACH;;AACD,SAAKJ,OAAO,CAACW,YAAb;AACA;AACI,eAAOD,cAAc,CAACP,KAAD,EAAQC,MAAR,CAArB;AACH;;AACD;AACI,aAAOD,KAAP;AAnBR;AAqBH,CAtBD;;AAwBA,SAASO,cAAT,CAAwBP,KAAxB,EAA+BC,MAA/B,EACA;AACI,MAAIQ,WAAW,GAAGX,CAAC,CAACY,KAAF,CAAQ,EAAR,EAAYV,KAAZ,CAAlB;;AACA,MAAIW,YAAY,GAAGF,WAAW,CAACG,QAAZ,CAAqBC,IAArB,CAA0B,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAACC,SAAN,KAAoBd,MAAM,CAACU,YAAP,CAAoBI,SAA5C;AAAA,GAA/B,CAAnB;;AACA,MAAKJ,YAAL,EACA;AACIF,IAAAA,WAAW,CAACG,QAAZ,GAAuBH,WAAW,CAACG,QAAZ,CAAqBI,GAArB,CAAyB,UAAAF,KAAK;AAAA,aAAIA,KAAK,CAACC,SAAN,KAAoBd,MAAM,CAACU,YAAP,CAAoBI,SAAxC,GAAoDd,MAAM,CAACU,YAA3D,GAA0EG,KAA9E;AAAA,KAA9B,CAAvB;AACH,GAHD,MAKA;AACIL,IAAAA,WAAW,CAACG,QAAZ,IAAwBX,MAAM,CAACU,YAA/B,4BAAgDF,WAAW,CAACG,QAA5D;AACH;;AACD,SAAOH,WAAP;AACH;;AAED,eAAeV,WAAf","sourcesContent":["import * as Actions from '../actions';\nimport _ from \"lodash\";\n\nconst userReducer = function (state = null, action) {\n    switch ( action.type )\n    {\n        case Actions.GET_USER_DATA:\n        {\n            return {...action.payload};\n        }\n        case Actions.UPDATE_USER_DATA:\n        {\n            return {...action.payload};\n        }\n        case Actions.GET_CHAT:\n        {\n            return getUpdatedUser(state, action);\n        }\n        case Actions.SEND_MESSAGE:\n        {\n            return getUpdatedUser(state, action);\n        }\n        default:\n            return state;\n    }\n};\n\nfunction getUpdatedUser(state, action)\n{\n    let newUserData = _.merge({}, state);\n    let userChatData = newUserData.chatList.find(_chat => _chat.contactId === action.userChatData.contactId);\n    if ( userChatData )\n    {\n        newUserData.chatList = newUserData.chatList.map(_chat => _chat.contactId === action.userChatData.contactId ? action.userChatData : _chat);\n    }\n    else\n    {\n        newUserData.chatList = [action.userChatData, ...newUserData.chatList];\n    }\n    return newUserData;\n}\n\nexport default userReducer;"]},"metadata":{},"sourceType":"module"}